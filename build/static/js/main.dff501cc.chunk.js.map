{"version":3,"sources":["state/router-slice.js","layout/grid-items.js","components/tooltip.js","layout/nav-list.js","components/search-field.js","app/locale-list-tools.js","state/locales-slice.js","app/constants.js","state/app-settings-slice.js","app/manage-query-results.js","app/weather-item.js","app/fetch-weather-for-locale.js","layout/header.js","layout/navbar-layout.js","app/note-list-tools.js","state/notes-slice.js","layout/card.js","layout/results-table.js","pages/home/home-body.js","pages/home/empty-state.js","pages/home/index.js","pages/details/icon-selector.js","pages/details/detail-card-elements/main-info-container.js","pages/details/detail-card-elements/detailed-info-container.js","components/note-input.js","pages/details/detail-card-elements/notes/note-element.js","pages/details/detail-card-elements/notes/note-container.js","pages/details/detail-card.js","pages/details/index.js","router.js","state/state.js","state/persistence/save-load.js","App.js","serviceWorker.js","index.js"],"names":["routerSlice","createSlice","name","initialState","active","allRoutes","home","details","reducers","updateRoute","state","payload","actions","selectActive","router","selectAllRoutes","isArray","Array","Grid","styled","div","p","columns","join","rows","gridGap","Cell","col","row","TooltipContainer","y","x","TooltipLabel","Tooltip","show","text","Nav","width","NavItem","NavText","Header","HeaderCell","Logo","height","id","x1","x2","offset","style","stopColor","stopOpacity","fill","fontSize","fontWeight","NavEntry","navOpen","icon","onClick","noop","activeRoute","toggleNavWidth","dispatch","useDispatch","React","useState","tooltip","setTooltip","showTooltip","evt","target","getBoundingClientRect","right","top","hideTooltip","useEffect","className","onMouseOver","stopPropagation","onMouseOut","test","help","about","InputContainer","SearchBar","input","attrs","type","SearchButton","onSubmit","searchRef","setText","placeholder","onInput","value","onKeyUp","key","length","ref","mergeLists","oldList","newList","omitFavorites","oldCopy","slice","newCopy","output","intersectionWith","isEqual","oldDifference","differenceWith","newDifference","copiedCities","isEmpty","forEach","entry","idx","findIndex","o","city","localeCompare","push","updatedEntry","country","favorited","localTime","observationTime","utcOffset","temperature","scale","iconUrl","descriptions","windDirection","windSpeed","pressure","precipitation","humidity","cloudCover","feelsLike","uvIndex","visibility","lat","long","pullAllWith","a","b","concatenated","concat","sortLocaleList","list","sortListByCity","getLocaleByCity","TypeError","i","swap","items","left","temp","undefined","pivot","Math","floor","j","partition","localesSlice","locales","setLocales","sorted","mergeLocales","allLocales","merged","setFavorite","item","favorite","deleteById","filter","_item","selectLocales","selectLocaleById","getLocaleById","METRIC_UNITS","precip","totalSnow","FAHRENHEIT_UNITS","SCIENTIFIC_UNITS","appSettingsSlice","units","firstVisit","setUnits","setFirstVisit","selectUnits","settings","selectFirstVisit","parseResults","results","success","utc","location","utc_offset","charAt","uniqueId","localtime","current","observation_time","request","unit","weather_icons","weather_descriptions","wind_speed","wind_dir","cloudcover","feelslike","uv_index","lon","fetchWeather","locale","scaleIsValid","axiosRequest","then","data","fetchList","localeList","Promise","all","vals","fetchUpdates","failed","result","params","access_key","process","query","axios","get","res","catch","err","valid","ScaleButton","useSelector","useRef","responseReceived","setResponseReceived","setCity","newLocale","console","log","handleUnitChange","copy","parsed","handleSubmit","val","getWeather","response","bottom","setTimeout","NavbarLayout","NavCell","Body","navWidth","BodyContents","Main","navbarExpanded","setNavbarExpanded","sortById","sortListById","notesSlice","notes","setNotes","mergeNotes","allNotes","oldDistinct","newDistinct","copiedNotes","updated","body","timeStamp","mergeNoteLists","deleteByLocale","localeId","selectNotesByLocale","getNotesByLocale","Card","ListEntryCard","CityCell","TempCell","ListEntry","setState","getUnits","time","split","showHeartTooltip","activeHeartTooltip","showEyeTooltip","activeEyeTooltip","hideAllTooltips","activeDeleteTooltip","cursor","Table","map","ListCell","WaitingText","HomeList","loaded","setList","fav","normal","reorderByFavorite","updateList","Parent","IconContainer","TextContainer","EmptyState","defaultQueries","setLoaded","storedLocales","getWeatherList","OfflineBody","beforeNight","LocationNameText","IconCell","TemperatureText","FeelsLikeText","MainInfoContainer","keyword","getIconForKeyword","InfoLabel","InfoText","HeartIconContainer","DetailedInfoContainer","desc","Fragment","NewNoteInput","textarea","error","Button","submit","CharTracker","NoteInput","onCancel","setValue","setError","textFieldRef","focus","hideTooltips","handleCancel","maxLength","onChange","ParentGrid","NoteDisplay","TimestampDisplay","NoteModule","note","handleEditClicked","handleDeleteClicked","NoteEntryGrid","NotesCell","NotesContainer","Date","showNewNoteField","setShowNewNoteField","editActive","setEditActive","handleEditSubmitted","edited","newNote","StyledCard","Divider","hr","DetailsCard","CONSTANTS","Details","currentRoute","store","configureStore","reducer","routerReducer","localesReducer","notesReducer","appSettingsReducer","preloadedState","serialized","localStorage","getItem","JSON","parse","loadState","subscribe","throttle","stringify","setItem","saveState","getState","library","add","faUmbrella","faSearch","faEye","faMinusCircle","faHome","faInfoCircle","faQuestionCircle","fullHeart","emptyHeart","faSun","faMoon","faCloudSun","faCloudMoon","faCloudSunRain","faCloudMoonRain","faSmog","faSnowflake","faWind","faCloudRain","faBolt","faCloudShowersHeavy","faSurprise","faStickyNote","faEdit","faEraser","faPaperPlane","faTrash","App","AppWrapper","Boolean","window","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.dff501cc.chunk.js","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\n/**\n * routerSlice stores state information related to the current active route as well as all available routes.\n */\nexport const routerSlice = createSlice({\n\tname: \"router\",\n\tinitialState: {\n\t\tactive: \"home\",\n\t\tallRoutes: {\n\t\t\thome: \"home\",\n\t\t\tdetails: \"details-\",\n\t\t}\n\t},\n\treducers: {\n\t\tupdateRoute: (state, { payload }) => {\n\t\t\tstate.active = payload;\n\t\t}\n\t}\n});\n\nexport const { updateRoute } = routerSlice.actions;\n\nexport const selectActive = state => state.router.active;\nexport const selectAllRoutes = state => state.router.allRoutes;\n\nexport default routerSlice.reducer;","import styled from \"styled-components\";\n\nconst { isArray } = Array;\n\nexport const Grid = styled.div`\n\tposition: relative;\n\theight: 100%;\n\twidth: 100%;\n\tdisplay: grid;\n\tmargin: 0;\n\tpadding: 0;\n\tbox-sizing: border-box;\n\n\tgrid-template-columns: ${p => {\n\t\tswitch(true) {\n\t\t\tcase p.columns && isArray(p.columns):\n\t\t\t\treturn p.columns.join(\" \");\n\t\t\tcase p.columns && !isArray(p.columns):\n\t\t\t\treturn p.columns;\n\t\t\tdefault:\n\t\t\t\treturn \"auto\";\n\t\t}\n\t}};\n\n\tgrid-template-rows: ${p => {\n\t\tswitch (true) {\n\t\t\tcase p.rows && isArray(p.rows):\n\t\t\t\treturn p.rows.join(\" \");\n\t\t\tcase p.rows && !isArray(p.rows):\n\t\t\t\treturn p.rows;\n\t\t\tdefault:\n\t\t\t\treturn \"auto\";\n\t\t}\n\t}};\n\n\tgrid-gap: ${p => p.gridGap ? p.gridGap : \"0\"};\n`;\n\nexport const Cell = styled.div`\n\tposition: relative;\n\tgrid-column: ${p => p.col ? p.col : \"1\"};\n\tgrid-row: ${p => p.row ? p.row : \"1\"};\n\theight: 100%;\n\twidth: 100%;\n\tmargin: 0;\n\tpadding: 0;\n\tbox-sizing: border-box;\n`;","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst TooltipContainer = styled.div`\n\tposition: fixed;\n\ttop: ${p => p.y ? p.y : 0}px;\n\tleft: ${p => p.x ? p.x : 0}px;\n\tz-index: 100;\n\tfont-weight: 300;\n\ttext-align: left;\n\ttext-align: start;\n\tdisplay: inline-block;\n\tmargin-bottom: 5px;\n\tuser-select: none;\n`;\n\nconst TooltipLabel = styled.div`\n\tmax-width: 200px;\n\tpadding: 3px 8px;\n\tcolor: rgb(255, 255, 255);\n\tbackground-color: rgba(0, 0, 0, 0.5);\n\tborder-radius: 4px;\n\tposition: fixed;\n`;\n\nconst Tooltip = ({\n\tx,\n\ty,\n\tshow,\n\ttext,\n}) => {\n\n\treturn (\n\t\t<>\n\t\t\t{show &&\n\t\t\t\t<TooltipContainer x={x} y={y}>\n\t\t\t\t\t<TooltipLabel>{text}</TooltipLabel>\n\t\t\t\t</TooltipContainer>\n\t\t\t}\n\t\t</>\n\t)\n};\n\nexport default Tooltip;","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Grid, Cell } from \"./grid-items\";\nimport { FontAwesomeIcon as Icon } from \"@fortawesome/react-fontawesome\";\nimport { updateRoute } from \"../state/router-slice\";\nimport { useDispatch } from \"react-redux\";\nimport { noop } from \"lodash\";\nimport Tooltip from \"../components/tooltip\";\n\nconst Nav = styled(Grid)`\n\tgrid-gap: 0;\n\twidth: ${p => p.width ? p.width : \"initial\"};\n\ttransition-property: width;\n\ttransition: 0.5s;\n`;\n\nconst NavItem = styled(Grid)`\n\tcursor: pointer;\n\tcolor: rgb(255, 255, 255);\n\ttransition-property: width;\n\ttransition-duration: 0.5s;\n\tbackground-color: ${p => p.active ? \"rgba(255, 255, 255, 0.2)\" : \"transparent\"};\n\twidth: 90%;\n\tmargin-left: 10%;\n\tborder-radius: 18px 0 0 18px;\n\theight: 100%;\n\topacity: 0.7;\n\n\t:hover {\n\t\topacity: 1;\n\t}\n`;\n\nconst NavText = styled(Cell)`\n\tline-height: 2.75em;\n\tfont-size: 0.75em;\n\tfont-weight: 600;\n\ttext-align: right;\n\twidth: 100%;\n\tpadding-right: 1em;\n`;\n\nconst Header = styled.div`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tcursor: pointer;\n\theight: 100%;\n\twidth: ${p => p.width ? p.width : \"initial\"};\n\n\t.logo-icon {\n\t\tposition: relative;\n\t\ttransform: scale(150%);\n\t\tmargin-left: 0.5em;\n\t}\n`;\n\nconst HeaderCell = styled(Cell)`\n`;\n\nconst Logo = () => {\n\treturn (\n\t\t<svg height=\"1em\" width=\"80%\">\n\t\t\t<defs>\n\t\t\t\t<linearGradient id=\"logo-gradient\" x1=\"0%\" x2=\"100%\">\n\t\t\t\t\t<stop offset=\"0%\" style={{ stopColor: \"#e3ffe7\", stopOpacity: 1}}/>\n\t\t\t\t\t<stop offset=\"100%\" style={{ stopColor: \"#d9e7ff\", stopOpacity: 1 }}/>\n\t\t\t\t</linearGradient>\n\t\t\t</defs>\n\t\t\t<text x=\"10\" y=\"15\" style={{fill: `url(#logo-gradient)`}} fontSize=\"1.1em\" fontWeight=\"800\">Umbrella Whether</text>\n\t\t</svg> \n\t)\n}\n\nconst NavEntry = ({ navOpen, icon, text, active, onClick = noop }) => {\n\treturn(\n\t\t<NavItem active={active} onClick={onClick} columns=\"4fr 1fr 2fr\">\n\t\t\t<Cell></Cell>\n\t\t\t<NavText col=\"2\">\n\t\t\t\t{icon && <Icon icon={icon} />}\n\t\t\t</NavText>\n\t\t\t<NavText col=\"3\">\n\t\t\t\t{navOpen && <span>{text}</span>}\n\t\t\t</NavText>\n\t\t</NavItem>\n\t)\n}\n\nexport default ({\n\tactiveRoute,\n\tallRoutes,\n\ttoggleNavWidth = noop,\n\tnavOpen = true,\n\twidth,\n}) => {\n\tconst dispatch = useDispatch();\n\tconst [ tooltip, setTooltip ] = React.useState({\n\t\tshow: false,\n\t\tx: 0,\n\t\ty: 0,\n\t});\n\n\tconst showTooltip = (evt) => {\n\t\tsetTooltip({\n\t\t\tshow: true,\n\t\t\tx: evt.target.getBoundingClientRect().right,\n\t\t\ty: evt.target.getBoundingClientRect().top\n\t\t});\n\t};\n\n\tconst hideTooltip = () => {\n\t\tsetTooltip({\n\t\t\t...tooltip,\n\t\t\tshow: false\n\t\t});\n\t};\n\n\t//Prevents tooltip from lingering when position of trigger element changes\n\tReact.useEffect(() => {\n\t\tconst hideTooltip = () => {\n\t\t\tsetTooltip({\n\t\t\t\tshow: false\n\t\t\t});\n\t\t};\n\n\t\thideTooltip();\n\t}, [navOpen]);\n\n\treturn (\n\t\t<Nav\n\t\t\tcolumns=\"1fr\"\n\t\t\trows=\"60px 2em 2em 2em 2em\"\n\t\t\twidth={width}\n\t\t>\n\t\t\t<Tooltip\n\t\t\t\tshow={tooltip.show} \n\t\t\t\tx={tooltip.x} \n\t\t\t\ty={tooltip.y} \n\t\t\t\ttext={navOpen ? \"Collapse\" : \"Expand\"} \n\t\t\t/>\n\t\t\t<HeaderCell\n\t\t\t\tonClick={toggleNavWidth}\n\t\t\t>\n\t\t\t\t<Header navOpen={navOpen} width={width}>\n\t\t\t\t\t<Icon \n\t\t\t\t\t\ticon=\"umbrella\" \n\t\t\t\t\t\tclassName=\"logo-icon\"\n\t\t\t\t\t/>\n\t\t\t\t\t{navOpen && \n\t\t\t\t\t\t<Logo/>\n\t\t\t\t\t}\n\t\t\t\t\t{navOpen && \n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tonMouseOver={(evt) => {\n\t\t\t\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\t\t\t\tshowTooltip(evt);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonMouseOut={hideTooltip}\n\t\t\t\t\t\t>{\"<\"}</span>\n\t\t\t\t\t}\n\t\t\t\t\t{!navOpen &&\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tonMouseOver={(evt) => {\n\t\t\t\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\t\t\t\tshowTooltip(evt);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonMouseOut={hideTooltip}\n\t\t\t\t\t\t>{\">\"}</span>\n\t\t\t\t\t}\n\t\t\t\t</Header>\n\t\t\t</HeaderCell>\n\t\t\t<Cell row=\"2\">\n\t\t\t\t<NavEntry \n\t\t\t\t\tactive={activeRoute === allRoutes.home || /^details/.test(activeRoute)}\n\t\t\t\t\tonClick={() => dispatch(updateRoute(allRoutes.home))}\n\t\t\t\t\tnavOpen={navOpen}\n\t\t\t\t\ttext=\"Home\"\n\t\t\t\t\ticon=\"home\"\n\t\t\t\t/>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"3\">\n\t\t\t\t<NavEntry\n\t\t\t\t\tactive={activeRoute === allRoutes.help}\n\t\t\t\t\tnavOpen={navOpen}\n\t\t\t\t\ttext=\"Help\"\n\t\t\t\t\ticon=\"question-circle\"\n\t\t\t\t/>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"4\">\n\t\t\t\t<NavEntry\n\t\t\t\t\tactive={activeRoute === allRoutes.about} \n\t\t\t\t\tnavOpen={navOpen}\n\t\t\t\t\ttext=\"About\"\n\t\t\t\t\ticon=\"info-circle\"\n\t\t\t\t/>\n\t\t\t</Cell>\n\t\t</Nav>\n\t);\n}","import React from \"react\";\nimport styled from \"styled-components\";\nimport { FontAwesomeIcon as Icon } from \"@fortawesome/react-fontawesome\";\nimport { Grid, Cell } from \"../layout/grid-items\";\n\nconst InputContainer = styled(Grid)`\n\tgrid-gap: 0;\n\twidth: 100%;\n\theight: 100%;\n`;\n\nconst SearchBar = styled.input.attrs({ type: \"text\" })`\n\tposition: relative;\n\ttop: 50%;\n\ttransform: translateY(-60%);\n\tbackground-color: rgba(255, 255, 255, 0.1);\n\tborder: 2px solid rgba(255, 255, 255, 0.7);\n\tborder-right: none;\n\tborder-radius: 18px 0px 0px 18px;\n\tpadding: 0.25em;\n\tpadding-left: 1em;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n\theight: 21px;\n\tcolor: rgb(255, 255, 255);\n`;\n\nconst SearchButton = styled.div`\n\tborder: 2px solid rgba(255, 255, 255, 0.7);\n\tborder-radius: 0px 18px 18px 0px;\n\tposition: relative;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n\theight: 20px;\n\tpadding: 0.25em;\n\tpadding-right: .5em;\n\tbackground-color: rgba(255, 255, 255, 0.1);\n\tcursor: pointer;\n\n\t.search-icon {\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t\tposition: relative;\n\t}\n`;\n\nexport default ({\n\tonSubmit,\n\tsearchRef,\n}) => {\n\tconst [ text, setText ] = React.useState(\"\");\n\n\tconst handleInput = (evt) => {\n\t\tsetText(evt.target.value);\n\t}\n\n\tconst handleKeyUp = ({ key }) => {\n\t\tif (key === \"Enter\") {\n\t\t\tif (text.length !== 0) {\n\t\t\t\tonSubmit(text);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn(\n\t\t<InputContainer columns=\"6fr 1fr\">\n\t\t\t<Cell>\n\t\t\t\t<SearchBar\n\t\t\t\t\tplaceholder=\"New York, New York\"\n\t\t\t\t\tonInput={handleInput}\n\t\t\t\t\tonKeyUp={handleKeyUp}\n\t\t\t\t\tonSubmit={() => onSubmit(text)}\n\t\t\t\t\tref={searchRef}\n\t\t\t\t/>\n\t\t\t</Cell>\n\t\t\t<Cell col=\"2\">\n\t\t\t\t<SearchButton>\n\t\t\t\t\t<Icon icon=\"search\" className=\"search-icon\" onClick={() => onSubmit(text)} />\n\t\t\t\t</SearchButton>\n\t\t\t</Cell>\n\t\t</InputContainer>\n\t)\n}","import { \n\tfindIndex, \n\tconcat, \n\tdifferenceWith, \n\tintersectionWith, \n\tisEqual, \n\tisEmpty, \n\tpullAllWith,\n} from \"lodash\";\n\n/**\n * Merges two lists of WeatherItems, ensuring no duplicate entries are added\n * @param {[]} oldList\n * @param {[]} newList\n * @param {boolean} omitFavorites - prevents merging of favorites, used when merging newly-fetched data into existing store\n */\nexport const mergeLists = (oldList, newList, omitFavorites = false) => {\n\t//Copy input arrays\n\tconst oldCopy = oldList.slice();\n\tconst newCopy = newList.slice();\n\n\t//Begin by extracting exactly matching values and adding to the output array\n\tconst output = intersectionWith(oldCopy, newCopy, isEqual);\n\n\t//Pull distinct values from both arrays\n\tconst oldDifference = differenceWith(oldCopy, newCopy, isEqual);\n\tconst newDifference = differenceWith(newCopy, oldCopy, isEqual);\n\n\t//Store the names of any cities with updated entries\n\tconst copiedCities = [];\n\n\t//Compare the resulting arrays\n\tif (!isEmpty(oldDifference)) {\n\t\toldDifference.forEach((entry) => {\n\t\t\tconst idx = findIndex(newDifference, (o) => {\n\t\t\t\treturn o.city.localeCompare(entry.city) === 0;\n\t\t\t});\n\n\t\t\t//If a matching index is not found, push the entry without changes\n\t\t\tif (idx === -1) {\n\t\t\t\toutput.push({...entry});\n\t\t\t} else {\n\t\t\t\t//Else copy all relevant values to new object...\n\t\t\t\tconst updatedEntry = { ...entry };\n\t\t\t\tupdatedEntry.city = newList[idx].city;\n\t\t\t\tupdatedEntry.country = newList[idx].country;\n\t\t\t\t//...omitting favorited field if appropriate\n\t\t\t\tupdatedEntry.favorited = omitFavorites ? entry.favorited : newList[idx].favorited;\n\t\t\t\tupdatedEntry.localTime = newList[idx].localTime;\n\t\t\t\tupdatedEntry.observationTime = newList[idx].observationTime;\n\t\t\t\tupdatedEntry.utcOffset = newList[idx].utcOffset;\n\t\t\t\tupdatedEntry.temperature = newList[idx].temperature;\n\t\t\t\tupdatedEntry.scale = newList[idx].scale;\n\t\t\t\tupdatedEntry.iconUrl = newList[idx].iconUrl;\n\t\t\t\tupdatedEntry.descriptions = newList[idx].descriptions;\n\t\t\t\tupdatedEntry.windDirection = newList[idx].windDirection;\n\t\t\t\tupdatedEntry.windSpeed = newList[idx].windSpeed;\n\t\t\t\tupdatedEntry.pressure = newList[idx].pressure;\n\t\t\t\tupdatedEntry.precipitation = newList[idx].precipitation;\n\t\t\t\tupdatedEntry.humidity = newList[idx].humidity;\n\t\t\t\tupdatedEntry.cloudCover = newList[idx].cloudCover;\n\t\t\t\tupdatedEntry.feelsLike = newList[idx].feelsLike;\n\t\t\t\tupdatedEntry.uvIndex = newList[idx].uvIndex;\n\t\t\t\tupdatedEntry.visibility = newList[idx].visibility;\n\t\t\t\tupdatedEntry.lat = newList[idx].lat;\n\t\t\t\tupdatedEntry.long = newList[idx].long;\n\n\t\t\t\t//Add the updated entry to the output array\n\t\t\t\toutput.push(updatedEntry);\n\t\t\t\t//Store the city name for faster checking against remaining values in new list\n\t\t\t\tcopiedCities.push(entry.city);\n\t\t\t}\n\t\t});\n\t}\n\n\t//Remove any cities already in output array\n\tpullAllWith(newDifference, copiedCities, (a, b) => { return isEqual(a.city, b); });\n\tconst concatenated = concat(output, newDifference);\n\n\treturn concatenated;\n}\n\n/**\n * Takes a list of WeatherItems and sorts that list alphabetically by city name\n * @param {[]} list \n */\nexport const sortLocaleList = (list) => {\n\treturn sortListByCity(list, 0, list.length - 1);\n}\n\n/**\n * Takes a list of WeatherItems and extracts only those found in a list of ids.\n * @param {[]} weatherItemList\n * @param {String} idList \n */\nexport const generateListById = (weatherItemList, idList) => {\n\t//If weatherItemList is not an array or is an object without an id field, throw error\n\tif (!isArray(weatherItemList) && weatherItemList.id === undefined) {\n\t\tthrow TypeError(\"First parameter must be an array.\");\n\t}\n\n\t//If only one entry and it exists in the list, return that entry\n\tif (!isArray(weatherItemList) || weatherItemList.length === 1) {\n\t\tif (weatherItemList.id !== undefined && idList.includes(weatherItemList.id)) {\n\t\t\treturn [weatherItemList];\n\t\t}\n\t}\n\n\treturn intersectionWith(weatherItemList, idList, (a, b) => isEqual(a.id, b));\n}\n\n/**\n * Reorders a list of weatherItems to place all favourites at the front, still in alphabetical order.\n * @param {[]} list \n */\nexport const reorderByFavorite = (list) => {\n\tconst sorted = sortListByCity(list, 0, list.length - 1);\n\n\tconst fav = [];\n\tconst normal = [];\n\n\tsorted.forEach((item) => {\n\t\tif (item.favorited) {\n\t\t\tfav.push(item);\n\t\t} else {\n\t\t\tnormal.push(item);\n\t\t}\n\t});\n\n\treturn concat(fav, normal);\n}\n\n/**\n * Takes a list of weatherItems and removes the entry with the provided id, if it exists.\n * @param {[]} list \n * @param {String} id \n */\nexport const removeById = (list, id) => {\n\tif(!isArray(list)) {\n\t\tthrow TypeError(\"First parameter must be an array.\");\n\t}\n\n\tconst copy = list.slice();\n\n\tpullAllWith(copy, id, (a, b) => a.id.localeCompare(b) === 0);\n\n\treturn copy;\n}\n\n/**\n * Selects the weatherItem associated with a given id\n * @param {[]} list \n * @param {String} id \n */\nexport const getLocaleById = (list, id) => {\n\tif(!isArray(list)) {\n\t\tthrow TypeError(\"First parameter must be an array.\");\n\t}\n\n\tfor (let i = 0; i < list.length; i++) {\n\t\tif (list[i].id.localeCompare(id) === 0) {\n\t\t\treturn list[i];\n\t\t}\n\t}\n\n\treturn undefined;\n}\n\n/**\n * Selects a weatherItem associated with a given city name\n * @param {[]} list \n * @param {String} city \n */\nexport const getLocaleByCity = (list, city) => {\n\tif (!isArray(list)) {\n\t\tthrow TypeError(\"First parameter must be an array.\");\n\t}\n\n\tfor (let i = 0; i < list.length; i++) {\n\t\tif (list[i].city.localeCompare(city) === 0) {\n\t\t\treturn list[i];\n\t\t}\n\t}\n\n\treturn undefined;\n}\n\n///////////// HELPER FUNCTIONS ////////////\n\n/**\n * Selects a pivot at the rough halfway point of a list and partitions that list,\n * plus swaps relevant elements to sort.\n * @param {[]} list - A list of WeatherItems (see /src/app/weather-item.js). \n * @param {integer} left - The currently-selected left index\n * @param {integer} right - The currently-selected right index\n */\nconst partition = (list, left, right) => {\n\tif (!list || !list.length) {\n\t\tthrow TypeError(\"Array parameter must not be empty or undefined.\");\n\t}\n\n\tlet pivot = list[Math.floor((right + left) / 2)];\n\tlet i = left;\n\tlet j = right;\n\n\twhile (i <= j) {\n\t\twhile (list[i].city.localeCompare(pivot.city) < 0) {\n\t\t\ti++;\n\t\t}\n\t\twhile (list[j].city.localeCompare(pivot.city) > 0) {\n\t\t\tj--;\n\t\t}\n\n\t\tif (i <= j) {\n\t\t\tswap(list, i, j);\n\t\t\ti++;\n\t\t\tj--;\n\t\t}\n\t}\n\n\treturn i;\n}\n\n/**\n * Swaps two elements in a list\n * @param {[]} items - A list of items \n * @param {integer} left - The index of the first element \n * @param {integer} right - The index of the second element\n */\nconst swap = (items, left, right) => {\n\tlet temp = items[left];\n\titems[left] = items[right];\n\titems[right] = temp;\n}\n\n/**\n * Quicksort list by the name of the city, returns\n * the list in increasing alphabetical order.\n * @param {[]} items - A list of WeatherItems (see /src/app/weather-item.js) -- either the full list or a subset\n * @param {integer} left - The starting leftmost index\n * @param {integer} right - The starting rightmost index\n */\nconst sortListByCity = (items, left, right) => {\n\tif (!items || !items.length) {\n\t\t//Safety error check in case I've beefed something\n\t\tthrow TypeError(\"Array parameter must not be empty or undefined.\");\n\t}\n\n\tlet idx = undefined;\n\n\tif (items.length > 1) {\n\t\tidx = partition(items, left, right);\n\n\t\t//If there are more elements on the left,\n\t\tif (left < idx - 1) {\n\t\t\t//Select that segment\n\t\t\tsortListByCity(items, left, idx - 1);\n\t\t}\n\n\t\t//Otherwise if there are more elements on the right,\n\t\tif (idx < right) {\n\t\t\t//Use that segment\n\t\t\tsortListByCity(items, idx, right);\n\t\t}\n\t}\n\n\t//If only one item is in the list, return the list as-is\n\treturn items;\n}\n\nconst { isArray } = Array;","import { createSlice } from \"@reduxjs/toolkit\";\nimport { findIndex } from \"lodash\";\nimport { mergeLists, sortLocaleList, getLocaleById , getLocaleByCity } from \"../app/locale-list-tools\";\n\nexport const localesSlice = createSlice({\n\tname: \"locales\",\n\tinitialState: {\n\t\tlocales: []\n\t},\n\treducers: {\n\t\t//Overwrite the list of locales\n\t\tsetLocales: (state, {payload}) => {\n\t\t\tconst sorted = payload.length ? sortLocaleList(payload) : payload;\n\t\t\tstate.locales = sorted;\n\t\t},\n\t\t//Merge a list of locales with the extant list\n\t\tmergeLocales: (state, {payload}) => {\n\t\t\tconst allLocales = [...state.locales];\n\t\t\tif (allLocales.length === 0) {\n\t\t\t\tstate.locales = [payload];\n\t\t\t} else {\n\t\t\t\tconst merged = mergeLists(allLocales, payload, true);\n\t\t\t\tconst sorted = sortLocaleList(merged);\n\t\t\t\tstate.locales = sorted;\n\t\t\t}\n\t\t},\n\t\t//Set favorite\n\t\tsetFavorite: (state, {payload}) => {\n\t\t\tconst allLocales = payload.allLocales;\n\n\t\t\t//Find the index of the locale in question\n\t\t\tconst idx = findIndex(allLocales, (item) => item.id === payload.id);\n\t\t\t\n\t\t\tif (idx !== -1) {\n\t\t\t\tconst item = {...allLocales[idx]};\n\t\t\t\titem.favorited = payload.favorite;\n\n\t\t\t\tconst merged = mergeLists(allLocales, [item]);\n\t\t\t\tconst sorted = sortLocaleList(merged);\n\n\t\t\t\tstate.locales = sorted;\n\t\t\t}\n\t\t},\n\t\t//Delete by id\n\t\tdeleteById: (state, {payload}) => {\n\t\t\tconst allLocales = payload.allLocales;\n\n\t\t\t//Find the index of the locale in question\n\t\t\tconst idx = findIndex(allLocales, (item) => item.id === payload.id);\n\n\t\t\tif (idx !== -1) {\n\t\t\t\tconst newList = allLocales.filter((_item, i) => i !== idx);\n\t\t\t\tstate.locales = newList;\n\t\t\t}\n\t\t}\n\t}\n});\n\nexport const { setLocales, mergeLocales, setFavorite, deleteById } = localesSlice.actions;\n\nexport const selectLocales = state => state.locales;\nexport const selectLocaleById = (state, id) => getLocaleById(state.locales.locales, id);\nexport const selectLocaleByCity = (state, city) => getLocaleByCity(state.locales.locales, city);\n\nexport default localesSlice.reducer;","/**\n * Used to define the scale for requests for the weatherstack API. Requests may return values in:\n *   - Metric units:\n * \t\t- Celsius (temperature)\n * \t\t- km/h (wind speed)\n * \t\t- km (visibility)\n * \t\t- mm (precip)\n * \t\t- cm (total snow)\n * \t\t- mb (pressure)\n * \n * \t- Fahrenheit + Imperial units:\n * \t\t- Fahrenheit (temperature)\n * \t\t- mph (wind speed)\n * \t\t- m (visibility)\n * \t\t- in (precip + total snow)\n * \t\t- mb (pressure)\n * \n * \t- Scientific units:\n * \t\t- Kelvin (temperature)\n * \t\t- hm/h (wind speed)\n * \t\t- km (visibility)\n * \t\t- mm (precip)\n * \t\t- cm (total snow)\n * \t\t- mb (pressure)\n */\nexport const METRIC_SCALE = \"m\";\nexport const FAHRENHEIT_SCALE = \"f\";\nexport const SCIENTIFIC_SCALE = \"s\";\n\nexport const METRIC_UNITS = {\n\ttemperature: \"C\",\n\twindSpeed: \"km/h\",\n\tvisibility: \"km\",\n\tprecip: \"mm\",\n\ttotalSnow: \"cm\",\n\tpressure: \"millibars\",\n};\n\nexport const FAHRENHEIT_UNITS = {\n\ttemperature: \"F\",\n\twindSpeed: \"mph\",\n\tvisibility: \"m\",\n\tprecip: \"in\",\n\ttotalSnow: \"in\",\n\tpressure: \"millibars\",\n};\n\nexport const SCIENTIFIC_UNITS = {\n\ttemperature: \"K\",\n\twindSpeed: \"km/h\",\n\tvisibility: \"km\",\n\tprecip: \"mm\",\n\ttotalSnow: \"cm\",\n\tpressure: \"millibars\",\n};","import { createSlice } from \"@reduxjs/toolkit\";\nimport * as CONSTANTS from \"../app/constants\";\n\nexport const appSettingsSlice = createSlice({\n\tname: \"settings\",\n\tinitialState: {\n\t\tunits: CONSTANTS.METRIC_SCALE,\n\t\tfirstVisit: true,\n\t},\n\treducers: {\n\t\tsetUnits: (state, {payload}) => {\n\t\t\tstate.units = payload;\n\t\t},\n\t\tsetFirstVisit: (state, {payload}) => {\n\t\t\tstate.firstVisit = payload;\n\t\t}\n\t}\n});\n\nexport const { setUnits, setFirstVisit } = appSettingsSlice.actions;\nexport const selectUnits = state => state.settings.units;\nexport const selectFirstVisit = state => state.settings.firstVisit;\n\nexport default appSettingsSlice.reducer;","import { uniqueId } from \"lodash\";\nimport { getWeatherItem } from \"./weather-item\";\n\nexport const parseResults = (results) => {\n\tif (results.success === false) {\n\t\treturn results;\n\t}\n\n\tconst utc = results.location.utc_offset.charAt(0).localeCompare(\"-\") !== 0 ? \"+\".concat(results.location.utc_offset) : results.location.utc_offset;\n\t\n\treturn getWeatherItem(\n\t\tuniqueId(`${results.location.name}.`),\n\t\tfalse,\n\t\tresults.location.name,\n\t\tresults.location.country,\n\t\tresults.location.localtime,\n\t\tresults.current.observation_time,\n\t\tutc,\n\t\tresults.current.temperature,\n\t\tresults.request.unit,\n\t\tresults.current.weather_icons,\n\t\tresults.current.weather_descriptions,\n\t\tresults.current.wind_speed,\n\t\tresults.current.wind_dir,\n\t\tresults.current.pressure,\n\t\tresults.current.precipitation,\n\t\tresults.current.humidity,\n\t\tresults.current.cloudcover,\n\t\tresults.current.feelslike,\n\t\tresults.current.uv_index,\n\t\tresults.current.visibility,\n\t\tresults.location.lat,\n\t\tresults.location.lon\n\t);\n}","/**\n * WeatherItem is used to manage and display the relevant information returned from a\n * request to the weatherstack API.\n * \n * It stores:\n *  - the basic metadata associated with the weather snapshot - relevant location and local time information\n * \t- a CurrentWeatherItem storing more detailed information about the weather\n * A WeatherItem consists of some or all of the following parameters:\n * @param {String} id - An unique identifier\n * @param {boolean} favorited - Whether or not the given locale should be stored as a favorite\n * @param {String} city - The city associated with the request\n * @param {String} country - The country associated with the request\n * @param {String} localtime - The current local time at location associated with the request\n * @param {String} observationtime - The time of the latest observation\n * @param {String} utcOffset - The time zone offset from UTC\n * @param {String} temperature - The temperature at time of latest observation\n * @param {String} scale - The scale used for the temperature and precipitation measurements\n * @param {String} iconUrl - The url of the icon provided by weatherstack\n * @param {String[]} descriptions - An array of descriptions associated with the current weather status\n * @param {String} windSpeed - The windspeed at time of observation\n * @param {String} windDirection - The wind direction at time of observation\n * @param {String} pressure - The pressure at time of observation\n * @param {String} precipitation - The amount of precipitation at time of observation, in units defined by the scale parameter\n * @param {String} humidity - The humidity at time of observation, in percentage\n * @param {String} cloudCover - Cloud cover at time of observation, in percentage\n * @param {String} feelsLike - The perceived temperature at time of observation, in selected scale\n * @param {String} uvIndex - The UV index rating at time of observation\n * @param {String} visibility - The visibility distance at time of observation, in selected scale\n * @param {String} lat - The latitude of the locale\n * @param {String} long - The longitude of the locale\n */\nconst getWeatherItem = (\n\tid,\n\tfavorited,\n\tcity,\n\tcountry,\n\tlocalTime,\n\tobservationTime,\n\tutcOffset,\n\ttemperature,\n\tscale,\n\ticonUrl,\n\tdescriptions,\n\twindSpeed,\n\twindDirection,\n\tpressure,\n\tprecipitation,\n\thumidity,\n\tcloudCover,\n\tfeelsLike,\n\tuvIndex,\n\tvisibility,\n\tlat,\n\tlong,\n) => ({\n\tid,\n\tfavorited,\n\tcity,\n\tcountry,\n\tlocalTime,\n\tobservationTime,\n\tutcOffset,\n\ttemperature,\n\tscale,\n\ticonUrl,\n\tdescriptions,\n\twindSpeed,\n\twindDirection,\n\tpressure,\n\tprecipitation,\n\thumidity,\n\tcloudCover,\n\tfeelsLike,\n\tuvIndex,\n\tvisibility,\n\tlat,\n\tlong\n});\n\nexport { getWeatherItem };","import axios from \"axios\";\nimport { FAHRENHEIT_SCALE, METRIC_SCALE, SCIENTIFIC_SCALE } from \"./constants\";\n\n/**\n * Fetches current weather information for the given locale in the given scale\n * @param {String} locale - May be a city name, UK/Canada/US ZIP code, or latitude and longitude coordinates.\n * @param {String} scale - The requested scale - s for scientific, m for metric (default), or f for fahrenheit + imperial\n */\nexport const fetchWeather = (locale, scale = METRIC_SCALE) => {\n\t//Validate inputs - locale must be defined\n\tif (!locale) {\n\t\tthrow TypeError(\"Locale cannot be undefined or null.\");\n\t}\n\n\t//Scale must be within three acceptable values defined in constants.js\n\tif (!scaleIsValid(scale)) {\n\t\tthrow TypeError(\"fetch-weather-for-locale: Invalid scale parameter passed: must be 'm', 's', or 'f'.\");\n\t}\n\n\t//Make request, extract data from promise and return\n\treturn axiosRequest(locale, scale).then(data => data);\n}\n\n/**\n * Fetches current weather information for a list of locales.\n * @param {[]} localeList \n * @param {String} scale \n */\nexport const fetchList = (localeList, scale = METRIC_SCALE) => {\n\tif (!localeList) {\n\t\tthrow TypeError(\"List of locales cannot be undefined or null.\");\n\t}\n\n\tif (!scaleIsValid(scale)) {\n\t\tthrow TypeError(\"Invalid scale parameter passed: must be 'm', 's', or 'f'.\");\n\t}\n\n\tconst list = [];\n\n\tlocaleList.forEach((locale) => {\n\t\tlist.push(axiosRequest(locale, scale));\n\t});\n\n\treturn Promise.all(list).then((vals) => vals);\n}\n\n/**\n * Used specifically to update an extant list of previously-generated locale items.\n * If city name search returns no result, a repeat search will be performed with coordinates.\n * @param {[]} locales \n * @param {String} scale \n */\nexport const fetchUpdates = (locales, scale = METRIC_SCALE) => {\n\tif (!locales) {\n\t\tthrow TypeError(\"List of locales cannot be undefined or null.\");\n\t}\n\n\tif (!scaleIsValid(scale)) {\n\t\tthrow TypeError(\"Invalid scale parameter passed: must be 'm', 's', or 'f'.\");\n\t}\n\n\tconst list = [];\n\tconst failed = [];\n\n\tlocales.forEach((locale) => {\n\t\tconst result = axiosRequest(locale.city, scale);\n\t\tif (result.success === false) {\n\t\t\tfailed.push(locale);\n\t\t} else {\n\t\t\tlist.push(result);\n\t\t}\n\t});\n\n\tif (failed.length) {\n\t\tfailed.forEach((locale) => {\n\t\t\tlist.push(axiosRequest(`${locale.lat},${locale.long}`, scale));\n\t\t});\n\t}\n\n\treturn Promise.all(list).then((vals) => vals);\n}\n\n//Performs axios request\nconst axiosRequest = (locale, scale) => {\n\tconst params = {\n\t\taccess_key: process.env.REACT_APP_WEATHERSTACK_API_KEY,\n\t\tquery: locale,\n\t\tunits: scale\n\t}\n\n\treturn axios.get(\n\t\t\"http://api.weatherstack.com/current\", { params }\n\t).then(\n\t\t//Extract promise\n\t\t(res) => { return res.data; }\n\t).catch(err => {\n\t\t//Throw the error up to presentation\n\t\tthrow err;\n\t});\n}\n\nexport const scaleIsValid = (scale) => {\n\tlet valid = false;\n\n\tif (scale.localeCompare(METRIC_SCALE) === 0) {\n\t\tvalid = true;\n\t}\n\n\tif (scale.localeCompare(FAHRENHEIT_SCALE) === 0) {\n\t\tvalid = true;\n\t}\n\n\tif (scale.localeCompare(SCIENTIFIC_SCALE) === 0) {\n\t\tvalid = true;\n\t}\n\n\treturn valid;\n}","import React from \"react\";\nimport styled from \"styled-components\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Online, Offline } from \"react-detect-offline\";\nimport { Grid, Cell } from \"./grid-items\";\nimport SearchField from \"../components/search-field\";\nimport { updateRoute } from \"../state/router-slice\";\nimport { selectLocales, setLocales, mergeLocales } from \"../state/locales-slice\";\nimport { selectUnits, setUnits } from \"../state/app-settings-slice\";\nimport { parseResults } from \"../app/manage-query-results\";\nimport { fetchWeather, fetchUpdates } from \"../app/fetch-weather-for-locale\";\nimport { getLocaleByCity } from \"../app/locale-list-tools\";\nimport Tooltip from \"../components/tooltip\";\nimport * as CONSTANTS from \"../app/constants\";\n\nconst Header = styled(Grid)`\n\twidth: 100%;\n\tpadding-left: 2em;\n\tbackground-color: #4A4E69;\n\tgrid-gap: 10px;\n\theight: 60px;\n`;\n\nconst HeaderCell = styled(Cell)`\n\tline-height: 60px;\n\tfont-size: 1em;\n`;\n\nconst ScaleButton = styled.div`\n\tposition: relative;\n\tright: -90%;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n\n\ttext-align: center;\n\tfont-weight: 800;\n\tline-height: 40px;\n\topacity: 0.7;\n\tcursor: pointer;\n\tborder: 2px solid rgba(255, 255, 255, 0.7);\n\tborder-radius: 10px;\n\n\twidth: 40px;\n\theight: 40px;\n\tuser-select: none;\n\n\t:hover {\n\t\topacity: 1;\n\t\tbackground-color: rgba(255, 255, 255, 0.1);\n\t}\n`;\n\nexport default () => {\n\tconst dispatch = useDispatch();\n\tconst allLocales = useSelector(selectLocales);\n\tconst searchRef = React.useRef();\n\tconst scale = useSelector(selectUnits);\n\n\tconst [ responseReceived, setResponseReceived ] = React.useState(false);\n\tconst [ city, setCity ] = React.useState(\"\");\n\tconst [ tooltip, setTooltip ] = React.useState({\n\t\tshow: false,\n\t\tx: 0,\n\t\ty: 0,\n\t});\n\n\t//Once the new city has been added to the list, or upon receipt of an error, redirect\n\tReact.useEffect(() => {\n\t\tif (responseReceived) {\n\t\t\tlet newLocale = {};\n\n\t\t\ttry {\n\t\t\t\tnewLocale = getLocaleByCity(allLocales.locales, city);\n\t\t\t} catch (err) {\n\t\t\t\tconsole.log(err);\n\t\t\t\t//Redirect to error page\n\t\t\t} finally {\n\t\t\t\tif (newLocale !== undefined) {\n\t\t\t\t\tdispatch(updateRoute(`details-${newLocale.id}`));\n\t\t\t\t} else {\n\t\t\t\t\t//Redirect to error page\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}, [allLocales, responseReceived, dispatch, city]);\n\n\tconst handleUnitChange = async () => {\n\t\tif (scale.localeCompare(CONSTANTS.METRIC_SCALE) === 0) {\n\t\t\tdispatch(setUnits(CONSTANTS.FAHRENHEIT_SCALE));\n\n\t\t\tif (allLocales.locales.length) {\n\t\t\t\tconst copy = [...allLocales.locales];\n\t\t\t\tconst newList = await fetchUpdates(copy, CONSTANTS.FAHRENHEIT_SCALE);\n\t\t\t\tconst parsed = [];\n\n\t\t\t\tnewList.forEach((result) => {\n\t\t\t\t\tparsed.push(parseResults(result));\n\t\t\t\t});\n\n\t\t\t\tdispatch(mergeLocales(parsed));\n\t\t\t}\n\t\t} else {\n\t\t\tdispatch(setUnits(CONSTANTS.METRIC_SCALE));\n\n\t\t\tif(allLocales.locales.length) {\n\t\t\t\tconst copy = [...allLocales.locales];\n\n\t\t\t\tconst newList = await fetchUpdates(copy, CONSTANTS.METRIC_SCALE);\n\t\t\t\tconst parsed = [];\n\n\t\t\t\tnewList.forEach((result) => {\n\t\t\t\t\tparsed.push(parseResults(result));\n\t\t\t\t});\n\n\t\t\t\tdispatch(mergeLocales(parsed));\n\t\t\t}\n\t\t}\n\t}\n\n\tconst handleSubmit = async (val) => {\n\t\tconst getWeather = async () => {\n\t\t\tconst result = await fetchWeather(val);\n\t\t\treturn parseResults(result);\n\t\t}\n\t\t\n\t\tconst response = await getWeather(val);\n\n\t\tif (response.success === false) {\n\t\t\tif (searchRef.current) {\n\t\t\t\tsetTooltip({\n\t\t\t\t\tshow: true,\n\t\t\t\t\tx: searchRef.current.getBoundingClientRect().right - 100,\n\t\t\t\t\ty: searchRef.current.getBoundingClientRect().bottom\n\t\t\t\t});\n\n\t\t\t\tsetTimeout(() => setTooltip({\n\t\t\t\t\t...tooltip,\n\t\t\t\t\tshow: false\n\t\t\t\t}), 5000);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tsetCity(response.city);\n\t\tsetResponseReceived(true);\n\n\t\tif (allLocales.locales.length) {\n\t\t\tdispatch(mergeLocales([response]));\n\t\t} else {\n\t\t\tdispatch(setLocales([response]));\n\t\t}\n\t};\n\n\tconst handleSubmitWhenOffline = () => {\n\t\tif (searchRef.current) {\n\t\t\tsetTooltip({\n\t\t\t\tshow: true,\n\t\t\t\tx: searchRef.current.getBoundingClientRect().right - 100,\n\t\t\t\ty: searchRef.current.getBoundingClientRect().bottom\n\t\t\t});\n\n\t\t\tsetTimeout(() => setTooltip({\n\t\t\t\t...tooltip,\n\t\t\t\tshow: false\n\t\t\t}), 5000);\n\t\t}\n\t}\n\n\treturn(\n\t\t<Header rows=\"60px\" columns=\"0fr 0fr 1fr\">\n\t\t\t<Online>\n\t\t\t\t<Tooltip\n\t\t\t\t\tshow={tooltip.show}\n\t\t\t\t\tx={tooltip.x}\n\t\t\t\t\ty={tooltip.y}\n\t\t\t\t\ttext=\"Your search returned no results! :( Please try again.\"\n\t\t\t\t/>\n\t\t\t</Online>\n\t\t\t<Offline>\n\t\t\t\t<Tooltip\n\t\t\t\t\tshow={tooltip.show}\n\t\t\t\t\tx={tooltip.x}\n\t\t\t\t\ty={tooltip.y}\n\t\t\t\t\ttext=\"Search function is not available when you're offline! :( Check your network connection and try again.\"\n\t\t\t\t/>\n\t\t\t</Offline>\n\t\t\t<HeaderCell>\n\t\t\t\tSearch:\n\t\t\t</HeaderCell>\n\t\t\t<Cell col=\"2\">\n\t\t\t\t<Online>\n\t\t\t\t\t<SearchField onSubmit={handleSubmit} searchRef={searchRef}  />\n\t\t\t\t</Online>\n\t\t\t\t<Offline>\n\t\t\t\t\t<SearchField onSubmit={handleSubmitWhenOffline} searchRef={searchRef} />\n\t\t\t\t</Offline>\n\t\t\t</Cell>\n\t\t\t<HeaderCell col=\"3\">\n\t\t\t\t<ScaleButton onClick={handleUnitChange}>\n\t\t\t\t\t{scale.localeCompare(CONSTANTS.METRIC_SCALE) === 0 ? \"C\" : \"F\"}\n\t\t\t\t</ScaleButton>\n\t\t\t</HeaderCell>\n\t\t</Header>\n\t)\n}","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Grid, Cell } from \"./grid-items\";\nimport Navbar from \"./nav-list\";\nimport Header from \"./header\";\n\nconst NavbarLayout = styled.div`\n\tposition: relative;\n\theight: 100%;\n\tmin-height: 600px;\n\tdisplay: flex;\n`;\n\nconst NavCell = styled.div`\n\tposition: relative;\n\toverflow: hidden;\n\twidth: ${p => p.width ? p.width : \"initial\"};\n\ttransition-property: width;\n\ttransition-duration: 0.5s;\n\tbackground-color: #4A4E69;\n\tuser-select: none;\n\tz-index: 10;\n\tmin-height: 600px;\n`;\n\nconst Body = styled.div`\n\ttransition-property: width;\n\ttransition-duration: 0.5s;\n\twidth: ${p => p.navWidth ? `calc(100% - ${p.navWidth})` : \"100%\"};\n\toverflow: visible;\n`;\n\nconst BodyContents = styled(Grid)`\n\ttransition-property: width;\n\ttransition-duration: 0.5s;\n\toverflow: auto;\n\twidth: 100%;\n\theight: 100%;\n`;\n\nexport default ({\n\tMain,\n\tactiveRoute,\n\tallRoutes,\n}) => {\n\tconst [ navbarExpanded, setNavbarExpanded ] = React.useState(true);\n\n\tconst toggleNavbar = () => {\n\t\tsetNavbarExpanded(!navbarExpanded);\n\t}\n\n\tconst navWidth = navbarExpanded ? \"225px\" : \"70px\";\n\n\tif (Main === undefined) return null;\n\n\treturn(\n\t\t<NavbarLayout\n\t\t\trows=\"100vh\"\n\t\t>\n\t\t\t<NavCell width={navWidth}>\n\t\t\t\t<Navbar\n\t\t\t\t\tactiveRoute={activeRoute}\n\t\t\t\t\tallRoutes={allRoutes}\n\t\t\t\t\ttoggleNavWidth={toggleNavbar}\n\t\t\t\t\tnavOpen={navbarExpanded}\n\t\t\t\t\twidth={navWidth}\n\t\t\t\t/>\n\t\t\t</NavCell>\n\t\t\t<Body navWidth={navWidth} col=\"2\">\n\t\t\t\t<BodyContents rows=\"10vh 90vh\" columns=\"1fr\">\n\t\t\t\t\t<Cell>\n\t\t\t\t\t\t<Header />\n\t\t\t\t\t</Cell>\n\t\t\t\t\t<Cell row=\"2\">\n\t\t\t\t\t\t<Main />\n\t\t\t\t\t</Cell>\n\t\t\t\t</BodyContents>\n\t\t\t</Body>\n\t\t</NavbarLayout>\n\t)\n}","import {\n\tfindIndex,\n\tconcat,\n\tisEqual,\n\tdifferenceWith,\n\tintersectionWith,\n\tpullAllWith,\n\tisEmpty\n} from \"lodash\";\n\nconst { isArray } = Array;\n\n/**\n * Used to merge arrays of notes. Each note should have:\n * \t- an id,\n *  - a body,\n *  - a city name\n * @param {[]} oldList \n * @param {[]} newList \n */\nexport const mergeNoteLists = (oldList, newList) => {\n\t//Copy input arrays\n\tconst oldCopy = oldList.slice();\n\tconst newCopy = newList.slice();\n\n\t//Extract any exactly-matching values\n\tconst output = intersectionWith(oldCopy, newCopy, isEqual);\n\n\t//Pull distinct values from each array\n\tconst oldDistinct = differenceWith(oldCopy, newCopy, isEqual);\n\tconst newDistinct = differenceWith(newCopy, oldCopy, isEqual);\n\n\t//Initialize variable to store ids of any notes with updated values\n\tconst copiedNotes = [];\n\n\tconsole.log(oldDistinct, newDistinct);\n\n\tif (!isEmpty(oldDistinct)) {\n\t\toldDistinct.forEach((entry) => {\n\t\t\tconst idx = findIndex(newDistinct, o => \n\t\t\t\to.id.localeCompare(entry.id) === 0\t\n\t\t\t);\n\n\t\t\t//If no match has been found for the current entry,\n\t\t\tif (idx === -1) {\n\t\t\t\t//Push entry without changes\n\t\t\t\toutput.push({...entry});\n\t\t\t} else {\n\t\t\t\t//Else copy all values to new object and update where relevant\n\t\t\t\tconst updated = {...entry};\n\t\t\t\tupdated.body = newDistinct[idx].body;\n\t\t\t\tupdated.timeStamp = newDistinct[idx].timeStamp;\n\n\t\t\t\toutput.push(updated);\n\t\t\t\tcopiedNotes.push(entry.id);\n\t\t\t}\n\t\t});\n\t}\n\n\t//Remove any ids already copied to output array from newDistinct\n\tpullAllWith(newDistinct, copiedNotes, (a, b) => isEqual(a.id, b));\n\tconst concatenated = concat(output, newDistinct);\n\n\treturn concatenated;\n}\n\n/**\n * Sorts the given list in ascending order by id field\n * @param {[]} list \n */\nexport const sortById = (list) => {\n\treturn sortListById(list);\n}\n\n/**\n * Retrieves a single note from a list based on the note's id\n * @param {[]} list \n * @param {String} id \n */\nexport const getNoteById = (list, id) => {\n\tif (!isArray(list)) {\n\t\tthrow TypeError(\"First parameter must be an array.\");\n\t}\n\n\tfor (let i = 0; i < list.length; i++) {\n\t\tif (list[i].id.localeCompare(id) === 0) {\n\t\t\treturn list[i];\n\t\t}\n\t}\n\n\treturn undefined;\n}\n\n/**\n * Selects any notes associated with the given locale id from a list.\n * @param {[]} list \n * @param {String} id \n */\nexport const getNotesByLocale = (list, id) => {\n\tif (!isArray(list)) {\n\t\tthrow TypeError(\"First parameter must be an array.\");\n\t}\n\n\t//Copy the input list\n\tconst output = [...list];\n\n\t//Remove all entries that don't match the given id\n\tpullAllWith(output, id, (o) => o.localeId.localeCompare(id) !== 0)\n\n\treturn output;\n}\n\n/// HELPER FUNCTIONS ///\n\n/**\n * Selects a pivot at the rough halfway point of a list and partitions that list,\n * plus swaps relevant elements.\n * @param {} list - A list of note items\n * @param {*} left - The currently-selected left index\n * @param {*} right - The currently-selected right index\n */\nconst partition = (list, left, right) => {\n\tif (!list || !list.length) {\n\t\tthrow TypeError(\"Array parameter must not be empty or undefined.\");\n\t}\n\n\tlet pivot = list[Math.floor((right + left) / 2)];\n\tlet i = left;\n\tlet j = right;\n\n\twhile (i <= j) {\n\t\twhile (list[i].id.localeCompare(pivot.id) < 0) {\n\t\t\ti++;\n\t\t}\n\t\twhile (list[j].id.localeCompare(pivot.id) > 0) {\n\t\t\tj--;\n\t\t}\n\n\t\tif (i <= j) {\n\t\t\tswap(list, i, j);\n\t\t\ti++;\n\t\t\tj--;\n\t\t}\n\t}\n\n\treturn i;\n}\n\n/**\n * Swaps two elements in a list\n * @param {[]} items - The list of items\n * @param {integer} left - The index of the first element\n * @param {integer} right - The index of the second element\n */\nconst swap = (items, left, right) => {\n\tlet temp = items[left];\n\titems[left] = items[right];\n\titems[right] = temp;\n}\n\n/**\n * Quicksort list by the id value.\n * @param {[]} items - The list of note items\n * @param {integer} left - The starting leftmost index\n * @param {integer} right - The starting rightmost index\n */\nconst sortListById = (items, left, right) => {\n\tif (!items || !items.length) {\n\t\tthrow TypeError(\"Array parameter must not be empty or undefined.\");\n\t}\n\n\tlet idx = undefined;\n\n\tif (items.length > 1) {\n\t\tidx = partition(items, left, right);\n\n\t\t//If there are more elements on the left,\n\t\tif (left < idx - 1) {\n\t\t\t//Select that segment\n\t\t\tsortListById(items, left, idx - 1);\n\t\t}\n\n\t\t//Else if there are more elements on the right,\n\t\tif (idx < right) {\n\t\t\t//Use that segment\n\t\t\tsortListById(items, idx, right);\n\t\t}\n\t}\n\n\t//If only one item is in the list, return the list as-is\n\treturn items;\n}","import { createSlice } from \"@reduxjs/toolkit\";\nimport { findIndex } from \"lodash\";\nimport { mergeNoteLists, sortById, getNoteById, getNotesByLocale } from \"../app/note-list-tools\";\n\n/**\n * A note should consist of:\n * \t- id: an unique ID\n * \t- body: a body consisting of a text of maximum 460 characters\n * \t- localeId: the id of an associated locale\n * \t- timeStamp: the time and date of submission or latest edit\n */\nexport const notesSlice = createSlice({\n\tname: \"notes\",\n\tinitialState: {\n\t\tnotes: []\n\t},\n\treducers: {\n\t\t//Overwrite the full list of notes\n\t\tsetNotes: (state, {payload}) => {\n\t\t\tconst sorted = payload.length ? sortById(payload) : payload;\n\t\t\tstate.notes = sorted;\n\t\t},\n\t\t//Merge one list with that already in state\n\t\tmergeNotes: (state, {payload}) => {\n\t\t\tconst allNotes = [...state.notes];\n\n\t\t\tif (allNotes.length === 0) {\n\t\t\t\tstate.notes = payload;\n\t\t\t} else {\n\t\t\t\tconst merged = mergeNoteLists(allNotes, payload);\n\t\t\t\tconst sorted = sortById(merged);\n\t\t\t\tstate.notes = sorted;\n\t\t\t}\n\t\t},\n\t\t//Delete the note with the given id\n\t\tdeleteById: (state, {payload}) => {\n\t\t\tconst allNotes = [...state.notes];\n\n\t\t\tconst idx = findIndex(allNotes, (item) => item.id === payload);\n\n\t\t\tif (idx !== -1) {\n\t\t\t\tconst newList = allNotes.filter((_item, i) => i !== idx);\n\t\t\t\tstate.notes = newList;\n\t\t\t}\n\t\t},\n\t\t//Delete the notes associated with the given locale\n\t\tdeleteByLocale: (state, {payload}) => {\n\t\t\tconst allNotes = [...state.notes];\n\n\t\t\tconst newList = allNotes.filter((item) => item.localeId.localeCompare(payload) !== 0);\n\n\t\t\tstate.notes = newList;\n\t\t}\n\t}\n});\n\nexport const { setNotes, mergeNotes, deleteById, deleteByLocale } = notesSlice.actions;\n\nexport const selectNotes = state => state.notes.notes;\nexport const selectNoteById = (state, id) => getNoteById(state.notes.notes, id);\nexport const selectNotesByLocale = (state, localeId) => getNotesByLocale(state.notes.notes, localeId);\n\nexport default notesSlice.reducer;","import styled from \"styled-components\";\n\nconst Card = styled.div`\n\twidth: 100%;\n\theight: 100%;\n\tbox-sizing: border-box;\n\tborder: none;\n\tborder-radius: 18px;\n\tpadding: 1em;\n\tbox-shadow: 5px 10px rgba(0, 0, 0, 0.1);\n`;\n\nexport default Card;","import React from \"react\";\nimport styled from \"styled-components\";\nimport { useDispatch } from \"react-redux\";\nimport { updateRoute } from \"../state/router-slice\";\nimport { deleteByLocale } from \"../state/notes-slice\";\nimport { setFavorite, deleteById } from \"../state/locales-slice\";\nimport { FontAwesomeIcon as Icon } from \"@fortawesome/react-fontawesome\";\nimport { Grid, Cell } from \"./grid-items\";\nimport Card from \"./card\";\nimport { FAHRENHEIT_SCALE, METRIC_SCALE, SCIENTIFIC_SCALE } from \"../app/constants\";\nimport Tooltip from \"../components/tooltip\";\n\nconst ListEntryCard = styled(Card)`\n\tposition: relative;\n\tbackground-color: #4A4E69;\n\theight: auto;\n\ttext-align: left;\n\tuser-select: none;\n\twidth: 98%;\n\tmin-width: 700px;\n`;\n\nconst CityCell = styled(Cell)`\n\tfont-weight: 600;\n\topacity: 0.7;\n\tcursor: pointer;\n\t:hover {\n\t\topacity: 1;\n\t}\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n`;\n\nconst TempCell = styled(Cell)`\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n\ttext-align: left;\n\tpadding-left: 1em;\n\tletter-spacing: 1px;\n`;\n\n/**\n * Parses the unit marker associated with a weatherstack request and returns a relevant temperature unit.\n * \n * @param {String} scale - The scale marker associated with a request to weatherstack.\n */\nconst getUnits = (scale) => {\n\tswitch (true) {\n\t\tcase scale === FAHRENHEIT_SCALE:\n\t\t\treturn \"F\";\n\t\tcase scale === METRIC_SCALE:\n\t\t\treturn \"C\";\n\t\tcase scale === SCIENTIFIC_SCALE:\n\t\t\treturn \"K\";\n\t\tdefault:\n\t\t\treturn \"C\";\n\t}\n}\n\n/**\n * Defines a single list entry in a table of weather results.\n * Takes a WeatherEntryItem and a row number. \n */\nconst ListEntry = ({ entry, row, items, state, setState }) => {\n\tconst dispatch = useDispatch();\n\n\tif (entry === undefined) return null;\n\n\tconst units = getUnits(entry.scale);\n\tconst time = entry.localTime ? entry.localTime.split(\" \")[1] : \"Unknown Time\";\n\n\tconst onDeleteEntry = () => {\n\t\t//Delete the entry...\n\t\tdispatch(deleteById({ id: entry.id, allLocales: items }));\n\t\t//...and any associated notes\n\t\tdispatch(deleteByLocale(entry.id));\n\t};\n\n\tconst showHeartTooltip = (evt) => {\n\t\tsetState({\n\t\t\t...state,\n\t\t\tactiveHeartTooltip: {\n\t\t\t\tid: entry.id,\n\t\t\t\tx: evt.target.getBoundingClientRect().right,\n\t\t\t\ty: evt.target.getBoundingClientRect().top - 20\n\t\t\t}\n\t\t});\n\t};\n\n\tconst showDeleteTooltip = (evt) => {\n\t\tsetState({\n\t\t\t...state,\n\t\t\tactiveDeleteTooltip: {\n\t\t\t\tid: entry.id,\n\t\t\t\tx: evt.target.getBoundingClientRect().right,\n\t\t\t\ty: evt.target.getBoundingClientRect().top - 20\n\t\t\t}\n\t\t});\n\t};\n\n\tconst showEyeTooltip = (evt) => {\n\t\tsetState({\n\t\t\t...state,\n\t\t\tactiveEyeTooltip: {\n\t\t\t\tid: entry.id,\n\t\t\t\tx: evt.target.getBoundingClientRect().right,\n\t\t\t\ty: evt.target.getBoundingClientRect().top - 20\n\t\t\t}\n\t\t});\n\t};\n\n\tconst hideAllTooltips = () => {\n\t\tsetState({\n\t\t\tactiveHeartTooltip: {\n\t\t\t\t...state.activeHeartTooltip,\n\t\t\t\tid: -1\n\t\t\t},\n\t\t\tactiveEyeTooltip: {\n\t\t\t\t...state.activeEyeTooltip,\n\t\t\t\tid: -1\n\t\t\t},\n\t\t\tactiveDeleteTooltip: {\n\t\t\t\t...state.activeDeleteTooltip,\n\t\t\t\tid: -1\n\t\t\t}\n\t\t});\n\t};\n\n\treturn (\n\t\t<>\n\t\t<Tooltip \n\t\t\t\tshow={entry.id.localeCompare(state.activeHeartTooltip.id) === 0} \n\t\t\t\ttext={entry.favorited ? \"Remove favorite\" : \"Add favorite\"}\n\t\t\t\tx={state.activeHeartTooltip.x}\n\t\t\t\ty={state.activeHeartTooltip.y}\n\t\t\t/>\n\t\t\t<Tooltip\n\t\t\t\tshow={entry.id.localeCompare(state.activeEyeTooltip.id) === 0}\n\t\t\t\ttext={\"View details\"}\n\t\t\t\tx={state.activeEyeTooltip.x}\n\t\t\t\ty={state.activeEyeTooltip.y}\n\t\t\t/>\n\t\t\t<Tooltip\n\t\t\t\tshow={entry.id.localeCompare(state.activeDeleteTooltip.id) === 0}\n\t\t\t\ttext={\"Delete\"}\n\t\t\t\tx={state.activeDeleteTooltip.x}\n\t\t\t\ty={state.activeDeleteTooltip.y}\n\t\t\t/>\n\t\t<Cell row={row}>\n\t\t\t<ListEntryCard>\n\t\t\t\t<Grid columns=\"1fr 4fr 4fr 6fr\" rows=\"1.2em\">\n\t\t\t\t\t<CityCell onClick={() => dispatch(updateRoute(`details-${entry.id}`))}>\n\t\t\t\t\t\t<Icon \n\t\t\t\t\t\t\ticon={[\"far\", \"eye\"]}\n\t\t\t\t\t\t\tonMouseOver={showEyeTooltip}\n\t\t\t\t\t\t\tonMouseOut={hideAllTooltips}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CityCell>\n\t\t\t\t\t<CityCell col=\"2\" onClick={() => dispatch(updateRoute(`details-${entry.id}`))}>\n\t\t\t\t\t\t\t<span onMouseOver={showEyeTooltip} onMouseOut={hideAllTooltips}>{`${entry.city} - ${entry.country}`}</span>\n\t\t\t\t\t</CityCell>\n\t\t\t\t\t<TempCell col=\"3\">\n\t\t\t\t\t\t\t<strong>{`${entry.temperature} ${units}`}</strong> {`at`} <strong>{time}</strong> {`UTC ${entry.utcOffset}`}\n\t\t\t\t\t</TempCell>\n\t\t\t\t\t<CityCell col=\"4\">\n\t\t\t\t\t\t{entry.favorited &&\n\t\t\t\t\t\t\t<Icon \n\t\t\t\t\t\t\t\ticon=\"heart\" \n\t\t\t\t\t\t\t\tonMouseOver={showHeartTooltip}\n\t\t\t\t\t\t\t\tonMouseOut={hideAllTooltips}\n\t\t\t\t\t\t\t\tonClick={() => dispatch(setFavorite({ id: entry.id, favorite: false, allLocales: items }))}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{!entry.favorited &&\n\t\t\t\t\t\t\t<Icon \n\t\t\t\t\t\t\t\ticon={[\"far\", \"heart\"]} \n\t\t\t\t\t\t\t\tonMouseOver={showHeartTooltip}\n\t\t\t\t\t\t\t\tonMouseOut={hideAllTooltips}\n\t\t\t\t\t\t\t\tonClick={() => dispatch(setFavorite({ id: entry.id, favorite: true, allLocales: items }))} \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t</CityCell>\n\t\t\t\t\t<CityCell col=\"5\">\n\t\t\t\t\t\t<Icon \n\t\t\t\t\t\t\ticon=\"minus-circle\" \n\t\t\t\t\t\t\tonMouseOver={showDeleteTooltip}\n\t\t\t\t\t\t\tonMouseOut={hideAllTooltips}\n\t\t\t\t\t\t\tonClick={onDeleteEntry} \n\t\t\t\t\t\t\tstyle={{ cursor: \"pointer\" }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CityCell>\n\t\t\t\t</Grid>\n\t\t\t</ListEntryCard>\n\t\t</Cell>\n\t\t</>\n\t)\n};\n\nconst Table = ({\n\titems,\n}) => {\n\tconst [ state, setState ] = React.useState({\n\t\tactiveHeartTooltip: {\n\t\t\tid: -1,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t},\n\t\tactiveEyeTooltip: {\n\t\t\tid: -1,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t},\n\t\tactiveDeleteTooltip: {\n\t\t\tid: -1,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t}\n\t});\n\n\tif (items === undefined || !items.length) return null;\n\n\treturn(\n\t\t<Grid columns=\"1fr\" rows={`repeat(${items.length}, 3em)`} gridGap=\"10px\">\n\t\t\t{items.map((entry, idx) => {\n\t\t\t\treturn (<ListEntry entry={entry} key={`weather-list-entry-${entry.id}:${idx}`} row={idx + 1} items={items} state={state} setState={setState} />);\n\t\t\t})}\n\t\t</Grid>\n\t)\n}\n\nexport default Table;","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Grid, Cell } from \"../../layout/grid-items\";\nimport Table from \"../../layout/results-table\";\nimport { reorderByFavorite } from \"../../app/locale-list-tools\";\n\nconst Body = styled(Grid)`\n\tpadding: 2em;\n\tposition: relative;\n\tmin-width: 700px;\n`;\n\nconst ListCell = styled(Cell)`\n\toverflow-y: auto;\n\n\t::-webkit-scrollbar {\n\t\twidth: 4px;\n\t}\n\n\t::-webkit-scrollbar-track {\n\t\topacity: 0;\n\t}\n\n\t::-webkit-scrollbar-thumb {\n\t\tborder-radius: 10px;\n\t\tbackground: #4A4E69;\n\t}\n\n\tscrollbar-color: #4A4E69;\n\tscrollbar-width: 4px;\n`;\n\nconst WaitingText = styled.div`\n\tfont-weight: 800;\n\ttext-align: left;\n\tfont-size: 1em;\n\tletter-spacing: 2px;\n\tposition: relative;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translateX(-50%) translateY(-50%);\n`;\n\nconst HomeList = ({\n\titems = [],\n\tloaded\n}) => {\n\tconst [ list, setList ] = React.useState(items);\n\n\tReact.useEffect(() => {\n\t\tconst updateList = () => {\n\t\t\tlet newList = [];\n\n\t\t\tif (items.length) {\n\t\t\t\titems.forEach((item) => {\n\t\t\t\t\tnewList.push(item);\n\t\t\t\t});\n\n\t\t\t\tconst sorted = reorderByFavorite(newList);\n\n\t\t\t\tsetList(sorted);\n\t\t\t}\n\t\t}\n\n\t\tupdateList();\n\t}, [items]);\n\n\tif (!items) return null;\n\n\treturn(\n\t\t<Body rows=\"80vh\" columns=\"1fr\">\n\t\t\t<ListCell>\n\t\t\t\t{loaded && \n\t\t\t\t\t<Table items={list} />\n\t\t\t\t}\n\t\t\t\t{!loaded &&\n\t\t\t\t\t<WaitingText>Please wait while we poke our heads outside...</WaitingText>\n\t\t\t\t}\n\t\t\t</ListCell>\n\t\t</Body>\n\t)\n}\n\nexport default HomeList;","import React from \"react\";\nimport styled from \"styled-components\";\nimport { FontAwesomeIcon as Icon } from \"@fortawesome/react-fontawesome\";\nimport { Grid, Cell } from \"../../layout/grid-items\";\n\nconst Parent = styled(Grid)`\n\tmin-width: 700px;\n\tposition: relative;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translateX(-50%) translateY(-50%);\n\theight: min-content;\n`;\n\nconst IconContainer = styled.div`\n\tposition: relative;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translateY(-50%) translateX(-50%);\n\tfont-size: 4em;\n`;\n\nconst TextContainer = styled.div`\n\tposition: relative;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translateY(-50%) translateX(-50%);\n\tfont-size: 2em;\n\tletter-spacing: 2px;\n\tfont-weight: 800;\n`;\n\nconst EmptyState = () => {\n\treturn (\n\t\t<Parent rows=\"min-content min-content\" columns=\"1fr\">\n\t\t\t<Cell>\n\t\t\t\t<IconContainer>\n\t\t\t\t\t<Icon icon=\"surprise\" />\n\t\t\t\t</IconContainer>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"2\">\n\t\t\t\t<TextContainer>\n\t\t\t\t\tThere's nothing here yet! Try searching for a city to add it to your homepage.\n\t\t\t\t</TextContainer>\n\t\t\t</Cell>\n\t\t</Parent>\n\t)\n};\n\nexport default EmptyState;","import React from \"react\";\nimport { Offline, Online } from \"react-detect-offline\";\nimport Layout from \"../../layout/navbar-layout\";\nimport Table from \"./home-body\";\nimport { parseResults } from \"../../app/manage-query-results\";\nimport { fetchList, fetchUpdates } from \"../../app/fetch-weather-for-locale\";\nimport { setLocales, mergeLocales, selectLocales } from \"../../state/locales-slice\";\nimport { setNotes } from \"../../state/notes-slice\";\nimport { selectFirstVisit, selectUnits, setFirstVisit } from \"../../state/app-settings-slice\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport EmptyState from \"./empty-state\";\n\nconst defaultQueries = [\n\t\"Beijing\",\n\t\"Buenos Aires\",\n\t\"Cairo\",\n\t\"Chongqing\",\n\t\"Delhi\",\n\t\"Dhaka\",\n\t\"Istanbul\",\n\t\"Karachi\",\n\t\"Mexico City\",\n\t\"Mumbai\",\n\t\"New York\",\n\t\"Osaka\",\n\t\"Sao Paulo\",\n\t\"Shanghai\",\n\t\"Tokyo\"\n];\n\nconst Body = () => {\n\tconst dispatch = useDispatch();\n\tconst [ loaded, setLoaded ] = React.useState(false);\n\n\tconst storedLocales = useSelector(selectLocales);\n\tconst firstVisit = useSelector(selectFirstVisit);\n\tconst units = useSelector(selectUnits);\n\n\tReact.useEffect(() => {\n\t\tconst getWeatherList = async () => {\n\t\t\tlet result = [];\n\n\t\t\t//If first visit, use default query list, else update existing list\n\t\t\tif (firstVisit) {\n\t\t\t\tresult = await fetchList(defaultQueries, units);\n\t\t\t\tdispatch(setFirstVisit(false));\n\t\t\t} else if (!firstVisit && storedLocales.locales.length) {\n\t\t\t\tresult = await fetchUpdates(storedLocales.locales, units);\n\t\t\t}\n\n\t\t\t//Generate and populate list of fresh results\n\t\t\tconst newList = [];\n\n\t\t\tif (result.length) {\n\t\t\t\tresult.forEach((res) => newList.push(parseResults(res)));\n\t\t\t}\n\n\t\t\tif (storedLocales.locales.length) {\n\t\t\t\tdispatch(mergeLocales(newList));\n\t\t\t} else {\n\t\t\t\tdispatch(setLocales(newList));\n\t\t\t\t//Clear out notes, just in case\n\t\t\t\tdispatch(setNotes([]));\n\t\t\t}\n\n\t\t\tsetLoaded(true);\n\t\t}\n\n\t\tgetWeatherList();\n\t\tsetLoaded(true);\n\t\t\n\t}, [storedLocales.locales, dispatch, firstVisit, units]);\n\n\tif (storedLocales.locales === undefined || storedLocales.locales.length === 0) {\n\t\treturn <EmptyState />\n\t}\n\n\treturn (\n\t\t<Table items={storedLocales.locales } loaded={loaded} />\n\t)\n}\n\nconst OfflineBody = () => {\n\tconst storedLocales = useSelector(selectLocales);\n\n\tif (storedLocales.locales === undefined || storedLocales.locales.length === 0) {\n\t\treturn <EmptyState />\n\t}\n\n\treturn (\n\t\t<Table items={storedLocales.locales} />\n\t)\n}\n\nexport default ({ activeRoute, allRoutes }) => {\n\treturn(\n\t\t<>\n\t\t\t<Online>\n\t\t\t\t<Layout \n\t\t\t\t\tMain={Body}\n\t\t\t\t\tactiveRoute={activeRoute}\n\t\t\t\t\tallRoutes={allRoutes}\n\t\t\t\t/>\n\t\t\t</Online>\n\t\t\t<Offline>\n\t\t\t\t<Layout \n\t\t\t\t\tMain={OfflineBody}\n\t\t\t\t\tactiveRoute={activeRoute}\n\t\t\t\t\tallRoutes={allRoutes}\n\t\t\t\t/>\n\t\t\t</Offline>\n\t\t</>\n\t)\n}","import React from \"react\";\nimport { FontAwesomeIcon as Icon } from \"@fortawesome/react-fontawesome\";\n\nexport const getIconForKeyword = (keyword, observationTime) => {\n\tswitch (true) {\n\t\tcase /clear/i.test(keyword) || /sunny/i.test(keyword): {\n\t\t\tif (beforeNight(observationTime)) {\n\t\t\t\treturn <Icon icon={[\"far\", \"sun\"]} className=\"weather-icon\" />\n\t\t\t} else {\n\t\t\t\treturn <Icon icon=\"moon\" className=\"weather-icon\" />\n\t\t\t}\n\t\t}\n\t\tcase /partly cloudy/i.test(keyword): {\n\t\t\tif (beforeNight(observationTime)) {\n\t\t\t\treturn <Icon icon=\"cloud-sun\" className=\"weather-icon\" />\n\t\t\t} else {\n\t\t\t\treturn <Icon icon=\"cloud-moon\" className=\"weather-icon\" />\n\t\t\t}\n\t\t}\n\n\t\tcase /cloudy/i.test(keyword) || /overcast/i.test(keyword): {\n\t\t\treturn <Icon icon=\"cloud\" className=\"weather-icon\" />\n\t\t}\n\n\t\tcase /thundery/i.test(keyword): {\n\t\t\treturn <Icon icon=\"bolt\" className=\"weather-icon\" />\n\t\t}\n\n\t\tcase /fog/i.test(keyword) || /haze/i.test(keyword): {\n\t\t\treturn <Icon icon=\"smog\" className=\"weather-icon\" />\n\t\t}\n\n\t\tcase /blowing/i.test(keyword) || /blizzard/i.test(keyword): {\n\t\t\treturn <Icon icon=\"wind\" className=\"weather-icon\" />\n\t\t}\n\n\t\tcase /snow/i.test(keyword): {\n\t\t\treturn <Icon icon=\"snowflake\" className=\"weather-icon\" />\t\n\t\t}\n\n\t\tcase /drizzle/i.test(keyword): {\n\t\t\tif (beforeNight(observationTime)) {\n\t\t\t\treturn <Icon icon=\"cloud-sun-rain\" className=\"weather-icon\" />\n\t\t\t} else {\n\t\t\t\treturn <Icon icon=\"cloud-moon-rain\" className=\"weather-icon\" />\n\t\t\t}\n\t\t}\n\n\t\tcase (/light/i.test(keyword) || /patchy/i.test(keyword)) && /rain/i.test(keyword): {\n\t\t\tif (beforeNight(observationTime)) {\n\t\t\t\treturn <Icon icon=\"cloud-sun-rain\" className=\"weather-icon\" />\n\t\t\t} else {\n\t\t\t\treturn <Icon icon=\"cloud-moon-rain\" className=\"weather-icon\" />\n\t\t\t}\n\t\t}\n\n\t\tcase /moderate/i.test(keyword) && /rain/i.test(keyword): {\n\t\t\treturn <Icon icon=\"cloud-rain\" className=\"weather-icon\" />\n\t\t}\n\n\t\tcase /rain/i.test(keyword) && /heavy/i.test(keyword): {\n\t\t\treturn <Icon icon=\"cloud-showers-heavy\" className=\"weather-icon\" />\n\t\t}\n\n\t\tdefault: return <Icon icon=\"umbrella\" className=\"weather-icon\" />\n\t}\n}\n\nconst beforeNight = (time) => {\n\treturn time.localeCompare(\"20:00\") < 0 && time.localeCompare(\"6:00\") > 0;\n}","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Grid, Cell } from \"../../../layout/grid-items\";\nimport { getIconForKeyword } from \"../icon-selector\";\n\nconst LocationNameText = styled.div`\n\tfont-weight: 800;\n\twhite-space: nowrap;\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n\tletter-spacing: 3px;\n\tmax-width: 100%;\n\tbox-sizing: border-box;\n\ttext-align: left;\n\tfont-size: 2em;\n`;\n\nconst IconCell = styled(Cell)`\n\tfont-size: 8em;\n\ttext-align: center;\n\n\t.weather-icon {\n\t\tposition: relative;\n\t\ttop: 50%;\n\t\ttransform: translateY(-50%);\n\t}\n`;\n\nconst TemperatureText = styled.div`\n\tfont-size: 5em;\n\ttext-align: center;\n\tposition: relative;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n\tletter-spacing: 2px;\n`;\n\nconst FeelsLikeText = styled.div`\n\tposition: relative;\n\tletter-spacing: 1px;\n\tfont-weight: 200;\n`;\n\n/**\n * Displays the primary information about the current weather\n * @param {*} param0 \n */\nconst MainInfoContainer = ({\n\tlocale,\n\ttime,\n\tunits\n}) => {\n\treturn (\n\t\t<Grid\n\t\t\trows=\"2em 2em 8em 2em\"\n\t\t\tcolumns=\"1fr 3fr\"\n\t\t\tgridGap=\"16px\"\n\t\t>\n\t\t\t<Cell row=\"1\" col=\"1/span 2\">\n\t\t\t\t<LocationNameText>\n\t\t\t\t\t{`${locale.city},`}\n\t\t\t\t</LocationNameText>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"2\" col=\"1/span 2\">\n\t\t\t\t<LocationNameText>\n\t\t\t\t\t{locale.country}\n\t\t\t\t</LocationNameText>\n\t\t\t</Cell>\n\t\t\t<IconCell row=\"3/span 2\">\n\t\t\t\t{getIconForKeyword(locale.descriptions[0], time)}\n\t\t\t</IconCell>\n\t\t\t<Cell row=\"3\" col=\"2\">\n\t\t\t\t<TemperatureText>\n\t\t\t\t\t{`${locale.temperature} ${units.temperature}`}\n\t\t\t\t</TemperatureText>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"4\" col=\"2\">\n\t\t\t\t<FeelsLikeText>\n\t\t\t\t\t{`/ feels like ${locale.feelsLike} ${units.temperature}`}\n\t\t\t\t</FeelsLikeText>\n\t\t\t</Cell>\n\t\t</Grid>\n\t)\n};\n\nexport default MainInfoContainer;","import React from \"react\";\nimport styled from \"styled-components\";\nimport { FontAwesomeIcon as Icon } from \"@fortawesome/react-fontawesome\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Grid, Cell } from \"../../../layout/grid-items\";\nimport { setFavorite, selectLocales } from \"../../../state/locales-slice\";\nimport Tooltip from \"../../../components/tooltip\";\n\nconst InfoLabel = styled.div`\n\tletter-spacing: 1px;\n\ttext-align: right;\n`;\n\nconst InfoText = styled.div`\n\tfont-weight: 600;\n\ttext-align: left;\n`;\n\nconst HeartIconContainer = styled.div`\n\tposition: relative;\n\tright: 0;\n\tfont-size: 2em;\n\tcursor: pointer;\n`;\n\n/**\n * Displays more detailed information about the current weather.\n * @param {*} param0 \n */\nconst DetailedInfoContainer = ({\n\tlocale,\n\ttime,\n\tunits\n}) => {\n\tconst dispatch = useDispatch();\n\tconst allLocales = useSelector(selectLocales);\n\n\tconst [ tooltip, setTooltip ] = React.useState({\n\t\tshow: false,\n\t\tx: 0,\n\t\ty: 0,\n\t});\n\n\tconst showTooltip = (evt) => {\n\t\tsetTooltip({\n\t\t\tshow: true,\n\t\t\tx: evt.target.getBoundingClientRect().left,\n\t\t\ty: evt.target.getBoundingClientRect().top - 20\n\t\t});\n\t};\n\n\tconst hideTooltip = () => {\n\t\tsetTooltip({\n\t\t\t...tooltip,\n\t\t\tshow: false,\n\t\t});\n\t};\n\n\treturn (\n\t\t<Grid columns=\"6fr 6fr 1fr\" rows=\"repeat(9, min-content)\" gridGap=\"10px\">\n\t\t\t<Tooltip\n\t\t\t\ttext={locale.favorited ? \"Remove favorite\" : \"Add favorite\"}\n\t\t\t\tshow={tooltip.show}\n\t\t\t\tx={tooltip.x}\n\t\t\t\ty={tooltip.y}\n\t\t\t/>\n\t\t\t<Cell>\n\t\t\t\t<InfoLabel>\n\t\t\t\t\tLocal Time:\n\t\t\t\t</InfoLabel>\n\t\t\t</Cell>\n\t\t\t<Cell col=\"2\">\n\t\t\t\t<InfoText>\n\t\t\t\t\t{time}\n\t\t\t\t</InfoText>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"1/span 2\" col=\"3\">\n\t\t\t\t<HeartIconContainer>\n\t\t\t\t\t{locale.favorited &&\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\ticon=\"heart\" \n\t\t\t\t\t\t\tonClick={() => dispatch(setFavorite({ id: locale.id, favorite: false, allLocales: allLocales.locales }))} \n\t\t\t\t\t\t\tonMouseOver={showTooltip}\n\t\t\t\t\t\t\tonMouseOut={hideTooltip}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t{!locale.favorited &&\n\t\t\t\t\t\t<Icon \n\t\t\t\t\t\t\ticon={[\"far\", \"heart\"]} \n\t\t\t\t\t\t\tonClick={() => dispatch(setFavorite({ id: locale.id, favorite: true, allLocales: allLocales.locales }))} \n\t\t\t\t\t\t\tonMouseOver={showTooltip}\n\t\t\t\t\t\t\tonMouseOut={hideTooltip}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</HeartIconContainer>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"2\">\n\t\t\t\t<InfoLabel>\n\t\t\t\t\tCurrent Weather:\n\t\t\t\t</InfoLabel>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"2\" col=\"2\">\n\t\t\t\t<InfoText>\n\t\t\t\t\t{locale.descriptions.map((desc, idx) =>\n\t\t\t\t\t\t<React.Fragment key={`${desc}-${idx}`}>{desc}</React.Fragment>\n\t\t\t\t\t)}\n\t\t\t\t</InfoText>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"3\">\n\t\t\t\t<InfoLabel>\n\t\t\t\t\tWind:\n\t\t\t\t</InfoLabel>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"3\" col=\"2\">\n\t\t\t\t<InfoText>\n\t\t\t\t\t{`${locale.windDirection || 0}, ${locale.windSpeed} ${units.windSpeed}`}\n\t\t\t\t</InfoText>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"4\">\n\t\t\t\t<InfoLabel>\n\t\t\t\t\tPressure:\n\t\t\t\t</InfoLabel>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"4\" col=\"2\">\n\t\t\t\t<InfoText>\n\t\t\t\t\t{`${locale.pressure || 0} ${units.pressure}`}\n\t\t\t\t</InfoText>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"5\">\n\t\t\t\t<InfoLabel>\n\t\t\t\t\tPrecipitation:\n\t\t\t\t</InfoLabel>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"5\" col=\"2\">\n\t\t\t\t<InfoText>\n\t\t\t\t\t{`${locale.precipitation || 0} ${units.precip}`}\n\t\t\t\t</InfoText>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"6\">\n\t\t\t\t<InfoLabel>\n\t\t\t\t\tHumidity:\n\t\t\t\t</InfoLabel>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"6\" col=\"2\">\n\t\t\t\t<InfoText>\n\t\t\t\t\t{`${locale.humidity || 0}%`}\n\t\t\t\t</InfoText>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"7\">\n\t\t\t\t<InfoLabel>\n\t\t\t\t\tCloud Cover:\n\t\t\t\t</InfoLabel>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"7\" col=\"2\">\n\t\t\t\t<InfoText>\n\t\t\t\t\t{`${locale.cloudCover || 0}%`}\n\t\t\t\t</InfoText>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"8\">\n\t\t\t\t<InfoLabel>\n\t\t\t\t\tUV Index:\n\t\t\t\t</InfoLabel>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"8\" col=\"2\">\n\t\t\t\t<InfoText>\n\t\t\t\t\t{locale.uvIndex || 0}\n\t\t\t\t</InfoText>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"9\">\n\t\t\t\t<InfoLabel>\n\t\t\t\t\tVisibility:\n\t\t\t\t</InfoLabel>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"9\" col=\"2\">\n\t\t\t\t<InfoText>\n\t\t\t\t\t{`${locale.visibility || 0} ${units.visibility}`}\n\t\t\t\t</InfoText>\n\t\t\t</Cell>\n\t\t</Grid>\n\t)\n}\n\nexport default DetailedInfoContainer;","import React from \"react\";\nimport styled from \"styled-components\";\nimport { FontAwesomeIcon as Icon } from \"@fortawesome/react-fontawesome\";\nimport { Grid, Cell } from \"../layout/grid-items\";\nimport Tooltip from \"./tooltip\";\nimport { noop } from \"lodash\";\n\nconst NewNoteInput = styled.textarea`\n\twidth: 100%;\n\theight: 100%;\n\tcolor: rgb(255, 255, 255);\n\tbackground-color: transparent;\n\tborder: 2px solid ${p => p.error ? \"rgba(255, 0, 0, 0.3)\": \"#22223B\"};\n\tborder-radius: 12px;\n\tpadding: 1em;\n\tbox-sizing: border-box;\n\n\t::-webkit-scrollbar {\n\t\twidth: 4px;\n\t}\n\n\t::-webkit-scrollbar-track {\n\t\topacity: 0;\n\t}\n\n\t::-webkit-scrollbar-thumb {\n\t\tborder-radius: 10px;\n\t\tbackground: #22223B;\n\t}\n\n\tscrollbar-color: #22223B;\n\tscrollbar-width: 4px;\n`;\n\nconst Button = styled.div`\n\tcursor: pointer;\n\topacity: 0.7;\n\ttext-align: ${p => p.submit ? \"right\" : \"left\"};\n\tline-height: 5em;\n\tfont-size: 1.2em;\n\tbox-sizing: border-box;\n\n\t:hover {\n\t\topacity: 1;\n\t}\n`;\n\nconst CharTracker = styled.div`\n\tfont-weight: 200;\n\tletter-spacing: 1px;\n\ttext-align: left;\n\tline-height: 5em;\n\tbox-sizing: border-box;\n\tfont-size: 1.2em;\n`;\n\nconst NoteInput = ({\n\tid,\n\ttext = \"\",\n\tonSubmit = noop,\n\tonCancel = noop,\n}) => {\n\tconst [ value, setValue ] = React.useState(text);\n\tconst [ tooltip, setTooltip ] = React.useState({\n\t\tid: -1,\n\t\tx: 0,\n\t\ty: 0,\n\t});\n\tconst [ error, setError ] = React.useState(false);\n\tconst textFieldRef = React.useRef();\n\n\tReact.useEffect(() => {\n\t\tsetValue(text);\n\t}, [text]);\n\n\tReact.useEffect(() => {\n\t\tif (textFieldRef.current) {\n\t\t\ttextFieldRef.current.focus();\n\t\t}\n\t}, []);\n\n\tconst hideTooltips = () => {\n\t\tsetTooltip({\n\t\t\t...tooltip,\n\t\t\tid: -1,\n\t\t});\n\t}\n\t\n\tconst showSubmitTooltip = (evt) => {\n\t\tsetTooltip({\n\t\t\tid: 0,\n\t\t\tx: evt.target.getBoundingClientRect().right,\n\t\t\ty: evt.target.getBoundingClientRect().top - 20\n\t\t});\n\t}\n\n\tconst showCancelTooltip = (evt) => {\n\t\tsetTooltip({\n\t\t\tid: 1,\n\t\t\tx: evt.target.getBoundingClientRect().right,\n\t\t\ty: evt.target.getBoundingClientRect().top - 20\n\t\t})\n\t}\n\n\tconst handleSubmit = () => {\n\t\tif (error) {\n\t\t\treturn;\n\t\t}\n\n\t\tonSubmit(id, value);\n\t\tonCancel();\n\t}\n\n\tconst handleCancel = () => {\n\t\tsetValue(text);\n\t\tonCancel();\n\t}\n\n\tconst handleKeyUp = ({ key }) => {\n\t\tswitch(true) {\n\t\t\tcase key === \"Enter\": {\n\t\t\t\tif (error) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\thandleSubmit();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcase key === \"Escape\": {\n\t\t\t\thandleCancel();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tconst handleInput = ({target}) => {\n\t\tif (target.value.length === 0) {\n\t\t\tsetValue(target.value);\n\t\t\tsetError(true);\n\t\t} else {\n\t\t\tsetValue(target.value);\n\t\t\tsetError(false);\n\t\t}\n\t}\n\t\n\n\treturn (\n\t\t<Grid rows=\"10em 5em\" columns=\"1fr 1fr 1fr\">\n\t\t\t<Tooltip \n\t\t\t\tshow={tooltip.id === 0} \n\t\t\t\tx={tooltip.x} \n\t\t\t\ty={tooltip.y} \n\t\t\t\ttext=\"Submit\"\n\t\t\t/>\n\t\t\t<Tooltip \n\t\t\t\tshow={tooltip.id === 1}\n\t\t\t\tx={tooltip.x}\n\t\t\t\ty={tooltip.y}\n\t\t\t\ttext=\"Abandon Changes\"\n\t\t\t/>\n\t\t\t<Cell col=\"1/span 3\">\n\t\t\t\t<NewNoteInput \n\t\t\t\t\tmaxLength=\"460\"\n\t\t\t\t\tonKeyUp={handleKeyUp}\n\t\t\t\t\terror={error}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonChange={handleInput}\n\t\t\t\t\tref={textFieldRef}\n\t\t\t\t\tplaceholder={error ? \"This field can't be empty! :(\" : \"Enter your note here and press the send button or hit Enter to submit. :)\"}\n\t\t\t\t/>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"2\" col=\"1\">\n\t\t\t\t<Button onClick={handleCancel} submit={false}>\n\t\t\t\t\t<Icon \n\t\t\t\t\t\ticon=\"trash\"\n\t\t\t\t\t\tonMouseOver={showCancelTooltip}\n\t\t\t\t\t\tonMouseOut={hideTooltips}\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"2\" col=\"2\">\n\t\t\t\t<CharTracker>\n\t\t\t\t\t{`${value.length}/460`}\n\t\t\t\t</CharTracker>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"2\" col=\"3\">\n\t\t\t\t<Button onClick={handleSubmit} submit={true}>\n\t\t\t\t\t<Icon \n\t\t\t\t\t\ticon=\"paper-plane\"\n\t\t\t\t\t\tonMouseOver={showSubmitTooltip}\n\t\t\t\t\t\tonMouseOut={hideTooltips} \n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</Cell>\n\t\t</Grid>\n\t)\n}\n\nexport default NoteInput;","import React from \"react\";\nimport styled from \"styled-components\";\nimport { FontAwesomeIcon as Icon } from \"@fortawesome/react-fontawesome\";\nimport { noop } from \"lodash\";\nimport { Grid, Cell } from \"../../../../layout/grid-items\";\nimport Tooltip from \"../../../../components/tooltip\";\n\nconst ParentGrid = styled(Grid)`\n\ttransition-property: width;\n\ttransition-duration: 0.5s;\n\tborder-bottom: 1px solid rgba(255, 255, 255, 0.5);\n`;\n\nconst NoteDisplay = styled.div`\n\twidth: 100%;\n\theight: min-content;\n\tcolor: rgb(255, 255, 255);\n\toverflow: hidden;\n\tpadding-top: .75em;\n\ttext-align: justify;\n\ttext-justify: auto;\n\ttransition-property: width;\n\ttransition-duration: 0.5s;\n`;\n\nconst TimestampDisplay = styled.div`\n\tline-height: 1.25em;\n\tfont-weight: 200;\n\ttext-align: justify;\n\ttext-justify: auto;\n\tfont-size: 0.75em;\n`;\n\nconst Button = styled.div`\n\ttext-align: right;\n\topacity: 0.7;\n\tline-height: 1.25em;\n\tfont-size: 1.25em;\n\tcursor: pointer;\n\n\t:hover {\n\t\topacity: 1;\n\t}\n`;\n\nconst NoteModule = ({\n\tnote,\n\thandleEditClicked = noop,\n\thandleDeleteClicked = noop,\n}) => {\n\tconst [ tooltip, setTooltip ] = React.useState({\n\t\tid: -1,\n\t\tx: 0,\n\t\ty: 0,\n\t});\n\n\tconst showDeleteTooltip = (evt) => {\n\t\tsetTooltip({\n\t\t\tid: 0,\n\t\t\tx: evt.target.getBoundingClientRect().left,\n\t\t\ty: evt.target.getBoundingClientRect().top - 20\n\t\t});\n\t}\n\n\tconst showEditTooltip = (evt) => {\n\t\tsetTooltip({\n\t\t\tid: 1,\n\t\t\tx: evt.target.getBoundingClientRect().left,\n\t\t\ty: evt.target.getBoundingClientRect().top - 20\n\t\t});\n\t}\n\n\tconst hideTooltips = () => {\n\t\tsetTooltip({\n\t\t\t...tooltip,\n\t\t\tid: -1\n\t\t});\n\t}\n\n\tif (note === undefined) return null;\n\n\treturn (\n\t\t<ParentGrid rows=\"min-content 2em\" columns=\"1fr 1fr 1fr\">\n\t\t\t<Tooltip\n\t\t\t\tshow={tooltip.id === 0}\n\t\t\t\ttext=\"Delete Note\"\n\t\t\t\tx={tooltip.x}\n\t\t\t\ty={tooltip.y}\n\t\t\t/>\n\t\t\t<Tooltip\n\t\t\t\tshow={tooltip.id === 1}\n\t\t\t\ttext=\"Edit Note\"\n\t\t\t\tx={tooltip.x}\n\t\t\t\ty={tooltip.y}\n\t\t\t/>\n\t\t\t<Cell col=\"1/span 3\">\n\t\t\t\t<NoteDisplay>\n\t\t\t\t\t{note.body}\n\t\t\t\t</NoteDisplay>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"2\">\n\t\t\t\t<TimestampDisplay>\n\t\t\t\t\t{note.timeStamp}\n\t\t\t\t</TimestampDisplay>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"2\" col=\"2\">\n\t\t\t\t<Button>\n\t\t\t\t\t<Icon \n\t\t\t\t\t\ticon=\"edit\"\n\t\t\t\t\t\tonMouseOver={showEditTooltip}\n\t\t\t\t\t\tonMouseOut={hideTooltips}\n\t\t\t\t\t\tonClick={handleEditClicked}\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</Cell>\n\t\t\t<Cell row=\"2\" col=\"3\">\n\t\t\t\t<Button>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon=\"trash\"\n\t\t\t\t\t\tonClick={handleDeleteClicked}\n\t\t\t\t\t\tonMouseOver={showDeleteTooltip}\n\t\t\t\t\t\tonMouseOut={hideTooltips}\n\t\t\t\t\t/>\n\t\t\t\t</Button>\n\t\t\t</Cell>\n\t\t</ParentGrid>\n\t)\n}\n\nexport default NoteModule;","import React from \"react\";\nimport styled from \"styled-components\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectNotesByLocale, mergeNotes, deleteById } from \"../../../../state/notes-slice\";\nimport { FontAwesomeIcon as Icon } from \"@fortawesome/react-fontawesome\";\nimport { Grid, Cell } from \"../../../../layout/grid-items\";\nimport NoteInput from \"../../../../components/note-input\";\nimport NoteModule from \"./note-element\";\nimport { uniqueId } from \"lodash\";\n\nconst NoteEntryGrid = styled(Grid)`\n\tmin-width: 700px;\n\ttext-align: left;\n\toverflow: visible;\n\tgrid-column-gap: 60px;\n\ttransition-property: width;\n\ttransition-duration: 0.5s;\n`;\n\nconst HeaderCell = styled(Cell)`\n\tfont-weight: 800;\n\topacity: 0.7;\n\tcursor: pointer;\n\toverflow-x: hidden;\n\toverflow-y: visible;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n\tletter-spacing: 1px;\n\tline-height: 3em;\n\n\t:hover {\n\t\topacity: 1;\n\t}\n`;\n\nconst NotesCell = styled(Cell)`\n\tfont-weight: 300;\n\toverflow: hidden;\n\toverflow-y: auto;\n\tmin-height: 20em;\n\tpadding-right: 1.5em;\n\ttransition-property: width;\n\ttransition-duration: 0.5s;\n\n\t::-webkit-scrollbar {\n\t\twidth: 4px;\n\t}\n\n\t::-webkit-scrollbar-track {\n\t\topacity: 0;\n\t}\n\n\t::-webkit-scrollbar-thumb {\n\t\tborder-radius: 10px;\n\t\tbackground: #22223B;\n\t}\n\n\tscrollbar-color: #22223B;\n\tscrollbar-width: 4px;\n`;\n\nconst NotesContainer = ({\n\tlocale\n}) => {\n\tconst timeStamp = Date();\n\n\tconst [ showNewNoteField, setShowNewNoteField ] = React.useState(false);\n\tconst [ editActive, setEditActive ] = React.useState(\"-1\");\n\n\tconst dispatch = useDispatch();\n\tconst notes = useSelector((state) => selectNotesByLocale(state, locale.id));\n\n\tconst handleNewNoteSubmitted = (id, body) => {\n\t\tconst newNote = {\n\t\t\tid,\n\t\t\tbody,\n\t\t\tlocaleId: locale.id,\n\t\t\ttimeStamp,\n\t\t}\n\n\t\tdispatch(mergeNotes([ newNote ]));\n\t}\n\n\tconst handleEditSubmitted = (id, body) => {\n\t\tconst edited = {\n\t\t\tid,\n\t\t\tbody,\n\t\t\tlocaleId: locale.id,\n\t\t\ttimeStamp\n\t\t}\n\n\t\tdispatch(mergeNotes([ edited ]));\n\t}\n\n\tconst handleNoteDeleted = (id) => {\n\t\tdispatch(deleteById(id));\n\t}\n\n\treturn (\n\t\t<NoteEntryGrid\n\t\t\trows=\"3em auto\"\n\t\t\tcolumns={showNewNoteField ? \"500px 1fr\" : \"200px 1fr\"}\n\t\t\tgridGap=\"20px\"\n\t\t>\n\t\t\t<HeaderCell>\n\t\t\t\t<Grid rows=\"auto\" gridGap=\"10px\" columns=\"min-content min-content\" onClick={() => setShowNewNoteField(!showNewNoteField)}>\n\t\t\t\t\t<Cell>\n\t\t\t\t\t\tAdd New Note\n\t\t\t\t\t</Cell>\n\t\t\t\t\t<Cell col=\"2\">\n\t\t\t\t\t\t<Icon icon=\"sticky-note\" />\n\t\t\t\t\t</Cell>\n\t\t\t\t</Grid>\n\t\t\t</HeaderCell>\n\t\t\t<Cell row=\"2\">\n\t\t\t\t{showNewNoteField &&\n\t\t\t\t\t<NoteInput\n\t\t\t\t\t\tid={uniqueId(`note-${timeStamp}-`)}\n\t\t\t\t\t\tonCancel={() => setShowNewNoteField(false)}\n\t\t\t\t\t\tonSubmit={handleNewNoteSubmitted}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t</Cell>\n\t\t\t<NotesCell col=\"2\">\n\t\t\t\t{notes.length !== 0 && \n\t\t\t\t\t<Grid rows={`repeat(${notes.length}, calc(min-content + .25em))`}>\n\t\t\t\t\t\t{notes.map((note, idx) => \n\t\t\t\t\t\t\t<React.Fragment key={`${note.id}-${idx}`}>\n\t\t\t\t\t\t\t\t{editActive.localeCompare(note.id) === 0 &&\n\t\t\t\t\t\t\t\t\t<NoteInput\n\t\t\t\t\t\t\t\t\t\tid={note.id}\n\t\t\t\t\t\t\t\t\t\ttext={note.body}\n\t\t\t\t\t\t\t\t\t\tonCancel={() => setEditActive(\"-1\")}\n\t\t\t\t\t\t\t\t\t\tonSubmit={handleEditSubmitted}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t{editActive.localeCompare(note.id) !== 0 &&\n\t\t\t\t\t\t\t\t\t<NoteModule\n\t\t\t\t\t\t\t\t\t\tnote={note}\n\t\t\t\t\t\t\t\t\t\thandleEditClicked={() => setEditActive(note.id)}\n\t\t\t\t\t\t\t\t\t\thandleDeleteClicked={() => handleNoteDeleted(note.id)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Grid>\n\t\t\t\t}\n\t\t\t</NotesCell>\n\t\t</NoteEntryGrid>\n\t)\n}\n\nexport default NotesContainer;","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Grid, Cell } from \"../../layout/grid-items\";\nimport Card from \"../../layout/card\";\nimport * as CONSTANTS from \"../../app/constants\";\nimport MainInfoContainer from \"./detail-card-elements/main-info-container\";\nimport DetailedInfoContainer from \"./detail-card-elements/detailed-info-container\";\nimport NotesContainer from \"./detail-card-elements/notes/note-container\";\n\nconst Parent = styled(Grid)`\n\tpadding: 2em;\n\tposition: relative;\n\tmin-width: 700px;\n\toverflow: visible;\n\tmin-height: 60vh;\n`;\n\nconst StyledCard = styled(Card)`\n\tpadding: 2.5em;\n\toverflow-y: auto;\n\tbackground: #4A4E69;\n\n\twidth: 100%;\n\theight: 100%;\n\n\t::-webkit-scrollbar {\n\t\twidth: 4px;\n\t}\n\n\t::-webkit-scrollbar-track {\n\t\topacity: 0;\n\t}\n\n\t::-webkit-scrollbar-thumb {\n\t\tborder-radius: 10px;\n\t\tbackground: #4A4E69;\n\t}\n\n\tscrollbar-color: #4A4E69;\n\tscrollbar-width: 4px;\n`;\n\n\n\nconst Divider = styled.hr`\n\twidth: 100%;\n\tposition: relative;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translateY(-50%) translateX(-50%);\n\tborder: 1px solid rgba(255, 255, 255, 0.5);\n\tmargin: 0;\n\tpadding: 0;\n`;\n\nconst getUnits = (scale) => {\n\tswitch (true) {\n\t\tcase scale.localeCompare(CONSTANTS.METRIC_SCALE) === 0:\n\t\t\treturn CONSTANTS.METRIC_UNITS;\n\t\tcase scale.localeCompare(CONSTANTS.FAHRENHEIT_SCALE) === 0:\n\t\t\treturn CONSTANTS.FAHRENHEIT_UNITS;\n\t\tcase scale.localeCompare(CONSTANTS.SCIENTIFIC_SCALE) === 0:\n\t\t\treturn CONSTANTS.SCIENTIFIC_UNITS;\n\t\tdefault: return CONSTANTS.METRIC_UNITS;\n\t}\n}\n\n\n\n/**\n * Displays the weather details for a specific location.\n * \n * @param {*} param0 \n */\nconst DetailsCard = ({\n\tlocale\n}) => {\n\tconst time = locale.localTime.split(\" \")[1];\n\tconst units = getUnits(locale.scale);\n\n\tif (locale === undefined) return null;\n\n\treturn (\n\t\t<Parent>\n\t\t\t<Cell>\n\t\t\t\t<StyledCard>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\trows=\"19em 1em 20em\"\n\t\t\t\t\t\tcolumns=\"minmax(360px, 510px) minmax(160px, 1fr) minmax(160px, 1fr)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Cell>\n\t\t\t\t\t\t\t<MainInfoContainer locale={locale} time={time} units={units} />\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t<Cell col=\"2/span 2\">\n\t\t\t\t\t\t\t<DetailedInfoContainer locale={locale} units={units} time={time} />\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t<Cell row=\"2\" col=\"1/span 3\">\n\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t\t<Cell row=\"3\" col=\"1/span 3\">\n\t\t\t\t\t\t\t<NotesContainer locale={locale} />\n\t\t\t\t\t\t</Cell>\n\t\t\t\t\t</Grid>\n\t\t\t\t</StyledCard>\n\t\t\t</Cell>\n\t\t</Parent>\n\t)\n}\n\nexport default DetailsCard;","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport Layout from \"../../layout/navbar-layout\";\nimport { selectLocaleById } from \"../../state/locales-slice\";\nimport DetailsCard from \"./detail-card\";\n\nconst Body = ({ locale }) => {\n\treturn(\n\t\t<DetailsCard locale={locale} />\n\t)\n}\n\nconst Details = ({ id, activeRoute, allRoutes }) => {\n\tconst locale = useSelector((state) => selectLocaleById(state, id));\n\n\treturn (\n\t\t<Layout\n\t\t\tMain={() => <Body locale={locale} />}\n\t\t\tactiveRoute={activeRoute}\n\t\t\tallRoutes={allRoutes}\n\t\t/>\n\t);\n};\n\nexport default Details;","import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { selectActive, selectAllRoutes } from \"./state/router-slice\";\nimport Home from \"./pages/home/index\";\nimport Details from \"./pages/details/index\";\n\nexport default () => {\n\tconst currentRoute = useSelector(selectActive);\n\tconst allRoutes = useSelector(selectAllRoutes);\n\n\tswitch (true) {\n\t\tcase (currentRoute === allRoutes.home):\n\t\t\treturn <Home activeRoute={currentRoute} allRoutes={allRoutes} />;\n\t\tcase /^details/.test(currentRoute): {\n\t\t\t//Split the route into route + id\n\t\t\tconst portions = currentRoute.split(/-(.+)/);\n\t\t\t//Isolate the id from the route pattern\n\t\t\tconst id = portions[1];\n\t\t\t//Use the id to fetch the correct details\n\t\t\treturn <Details activeRoute={currentRoute} allRoutes={allRoutes} id={id} />;\n\t\t}\n\t\tdefault: return <Home activeRoute={currentRoute} allRoutes={allRoutes} />;\n\t}\n}","import { configureStore } from \"@reduxjs/toolkit\";\nimport routerReducer from \"./router-slice\";\nimport localesReducer from \"./locales-slice\";\nimport notesReducer from \"./notes-slice\";\nimport appSettingsReducer from \"./app-settings-slice\";\nimport { throttle } from \"lodash\";\nimport { saveState, loadState } from \"./persistence/save-load\";\n\nconst store =  configureStore({\n\treducer: {\n\t\trouter: routerReducer,\n\t\tlocales: localesReducer,\n\t\tnotes: notesReducer,\n\t\tsettings: appSettingsReducer,\n\t},\n\tpreloadedState: loadState()\n});\n\n//Persist the current state tree to storage at most every 10 seconds\nstore.subscribe(throttle(\n\t() => saveState(store.getState(), 10000)\n));\n\nexport default store;","/**\n * Persists the current state tree to local storage.\n * Returns true if saving succeeds.\n * @param {obj} state \n */\nexport const saveState = (state) => {\n\ttry {\n\t\tconst serialized = JSON.stringify(state);\n\t\tlocalStorage.setItem('umbrella-whether-state', serialized);\n\t} catch (err) {\n\t\tconsole.log(err);\n\t\tthrow err;\n\t}\n\n\treturn true;\n};\n\n/**\n * Loads stored state from localstorage.\n */\nexport const loadState = () => {\n\ttry {\n\t\tconst serialized = localStorage.getItem('umbrella-whether-state');\n\n\t\t//If nothing is found, return undefined\n\t\tif (serialized === null) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn JSON.parse(serialized);\n\t} catch (err) {\n\t\tconsole.log(err);\n\t\treturn undefined;\n\t}\n}","import React from 'react';\nimport Router from \"./router\";\nimport { useDispatch } from \"react-redux\";\nimport { updateRoute } from \"./state/router-slice\";\nimport './App.css';\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { \n  faUmbrella, \n  faSearch, \n  faMinusCircle, \n  faHome, \n  faInfoCircle, \n  faQuestionCircle, \n  faHeart as fullHeart,\n  faMoon,\n  faCloudSun,\n  faCloudMoon,\n  faCloudSunRain,\n  faCloudMoonRain,\n  faSmog,\n  faSnowflake,\n  faWind,\n  faCloudRain,\n  faBolt,\n  faCloudShowersHeavy,\n  faSurprise,\n  faStickyNote,\n  faEdit,\n  faEraser,\n  faPaperPlane,\n  faTrash,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { faEye, faHeart as emptyHeart, faSun } from \"@fortawesome/free-regular-svg-icons\";\nimport { Provider } from \"react-redux\";\nimport store from \"./state/state\";\n\n//Add fontawesome import to library\nlibrary.add(\n  faUmbrella, \n  faSearch, \n  faEye, \n  faMinusCircle, \n  faHome, \n  faInfoCircle, \n  faQuestionCircle, \n  fullHeart, \n  emptyHeart,\n  faSun,\n  faMoon,\n  faCloudSun,\n  faCloudMoon,\n  faCloudSunRain,\n  faCloudMoonRain,\n  faSmog,\n  faSnowflake,\n  faWind,\n  faCloudRain,\n  faBolt,\n  faCloudShowersHeavy,\n  faSurprise,\n  faStickyNote,\n  faEdit,\n  faEraser,\n  faPaperPlane,\n  faTrash,\n);\n\nconst AppWrapper = () => {\n  //Wrap app in a provider\n  return (\n    <Provider store={store}>\n      <App/>\n    </Provider>\n  )\n}\n\nfunction App() {\n  const dispatch = useDispatch();\n  dispatch(updateRoute(\"home\"));\n\n  return (\n    <div className=\"App\">\n        <Router />\n    </div>\n  );\n}\n\nexport default AppWrapper;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}